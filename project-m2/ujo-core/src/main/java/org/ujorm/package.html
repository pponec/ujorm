<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>package.html - UJO (en)</title>

        <link rel="stylesheet" type="text/css" href="doc-files/style.css" title="style">
        <script type="text/javascript">
function loadCSS (cssUrl) {
var oLink = document.createElement("link")
oLink.href = cssUrl;
oLink.rel = "stylesheet";
oLink.type = "text/css";
document.body.appendChild(oLink);
        } </script>
    </head>

    <body style="background-color: white;">
        The Ujorm tutorial.
        <br>
        <!-- [AddSense] -->
        <h2 id="UJO"><img style="width: 32px; height: 32px; margin-right: 10px;" alt="UJO Icons" src="doc-files/ujo32.png">Content</h2>
          <ul>
              <li><a href="#UJO2">What is UJO?</a></li>
              <li><a href="#weakKey">Simplified Key</a></li>
              <li><a href="#how">My first Ujo object</a></li>
              <li><a href="#keyFactory2Interface">Using the KeyFactory in interfaces</a></li>
              <li><a href="#defaultvalues">Default values</a></li>
              <li><a href="#validators">Validators</a></li>
              <li><a href="#ujoext">Extended Ujo</a></li>
              <li><a href="#javabean">The JavaBean implements Ujo</a></li>
              <li><a href="#xml">XML serialization</a></li>
              <li><a href="#csv">CSV serialization</a></li>
              <li><a href="#tablemodel">Support of the JTable component</a></li>
              <li><a href="#RingBuffer">Stream searching</a></li>
              <li><a href="#ORM">Object-relation mapping (ORM)</a></li>
              <li><a href="#inheritance">UJO inheritance</a></li>
              <li><a href="#performance">Performance</a></li>
              <li><a href="#possibilities">Other possibilities of usage?</a></li>
              <li><a href="#refAppl">Referential Application</a></li>
              <li><a href="#where">Project home</a></li>
              <li><a href="#license">License</a></li>
              <li><a href="#faq">FAQ</a></li>
              <li><a href="#changes">Release notes</a></li>
          </ul>

        <h2 id="UJO2">What is UJO ?</h2>
        <a href="doc-files/UjoUmlFull.png" target="_top"><img src="doc-files/UjoUml.png" width="284" height="320" alt="UjoUml.png" style="margin: 0 0 10px 10px; border: 0; float: right;" ></a>

        The <span class="appl">Ujorm core</span> (original name was <span class="appl">UJO Framework</span>)
        is an open source Java small library which providing non-traditional objects based on the key‑value architecture
        to open up new exciting opportunities for writing efficient code.
        The original idea was a toy with generic data types of Java 5.0 however over
        time it appears, that the architecture has many interesting <strong>features</strong>:
        <ul>
        <li>an easy object introspection without a heavy PropertyDescriptor implementation</li>
        <li>value type safe solution</li>
        <li>a transfer of the UJO object Keys (original clas same was Property) by a collection</li>
        <li>the core of the building has two interfaces for an easy implementation</li>
        <li>the <a href="orm/package-summary.html#ORM">object-relation mapping</a> (ORM) support</li>
        </ul>

        These keys open up new possibilities for the use in the J2EE mainly in a production
        of generic operations over objects. Framework contains some tools for managing the UJO object
        in addition. So what are the main <strong>advantages</strong>?

        <ul>
        <li>the possibility to copy all or selected attributes from source to new object by a one statement (<a href="extensions/AbstractUjo.html#copyTo(org.ujorm.Ujo,org.ujorm.Key...)">method</a>)</li>
        <li>clone the object by a selected depth</li>
        <li>use a generic comparator</li>
        <li>find a property by its text name</li>
        <li>write a value by the found property to an another object or a collection of objects</li>
        <li>restore a default value of the property</li>
        <li>easy text conversions of the properties</li>
        <li>simplified work with an arrays (you can't initialize array before add method e.g.)</li>
        <li>generic toString() method for easy debugging</li>
        <li>easy visualization of UJO object(s) by JTable</li>
        <li>easy persistence of UJO to different formats including XML</li>
        <li>criteria tool for searching the Ujo objects in list</li>
        <li>the object itself recommends the availability of its attributes</li>
        <li>there is possible to implement a <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/beans/PropertyChangeListener.html">listener</a>
            to only one <a href="Ujo.html#writeValue(org.ujorm.Key,%20java.lang.Object)">place</a>
            for each keys including children</li>
        <li>support of <a href="http://en.wikipedia.org/wiki/JavaBeans">JavaBeans</a></li>
        <li>checking by unit tests</li>
        <li>tiny framework without further dependencies</li>
        <li>open source</li>
        </ul>

        <span class="appl">UJO</span> is an abbreviation for <span style="font-style: italic;">Unified Java Object</span>
        and they are all <a href="http://en.wikipedia.org/wiki/Object_%28computer_science%29">objects</a>,
	    which implements an interface <a href="Ujo.html">Ujo</a>.

        You can imagine the object UJO like a <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html">map</a> (an object that maps keys to values)
        with data access by <strong>methods of the key</strong> for example.
        This key is made up of the implementation of the <a href="Key.html">Key</a>
        including (among others) two type-safe methods:

        <ul>
            <li><a href="Key.html#setValue(UJO,%20VALUE)">Key.setValue(Ujo, VALUE)</a> - to write the value into the object and</li>
            <li><a href="Key.html#getValue(UJO)">Key.getValue(Ujo)</a> - to read the value (you can use an alias called of() optionally)</li>
        </ul>

        There is possible to send the keys to another objects simply contrary of the methods of JavaBean object.
        An example of usage can be a list of table columns sent to the data model type of TableModel
        or references to the methods of the bean in a JSP page.

        The core of the project are two interfaces
        <a href="Ujo.html" style="font-style: italic;">Ujo</a> a
        <a href="Key.html" style="font-style: italic;">Key</a>,
        which have got three abstract implementation:

           <ul>
               <li><a href="core/AbstractUjo.html">AbstractUjo</a> - great performance objects implemented by the <strong>object array</strong></li>
               <li><a href="implementation/map/MapUjo.html">MapUjo</a> - a memory safe solution for the case of the sparse attribute values, the solution is based on the object <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html">HashMap</a></li>
               <li><a href="implementation/bean/BeanUjo.html">BeanUjo</a> - the implementation maps the keys directly to the methods of <a href="http://en.wikipedia.org/wiki/JavaBeans">JavaBean</a> object using <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Method.html">Java reflection</a></li>
           </ul>


	I took inspiration for my work from project <a href="http://cayenne.apache.org/">Cayenne</a> (a solution for a persistence BO
	<a href="http://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a>)

        <br>
        <h2 id="weakKey">Simplified Key</h2>
        The interface
        <a href="http://ujorm.org/javadoc/org/ujorm/WeakKey.html">WeakKey</a> is a simplified
        <a href="http://ujorm.org/javadoc/org/ujorm/Key.html">Key</a> interface without the generic domain type parameter
        and it is intended for a common use.
         The WeakKey need not to use <a href="http://ujorm.org/javadoc/org/ujorm/Ujo.html">Ujo objects</a>,
         because it works with objects of type <code>Map</code> and <code>List</code>.
         <p>
         Note, the default implementation does not have the full support of several methods:
         <ul>
           <li><a href="http://ujorm.org/javadoc/org/ujorm/Key.html#getDomainType()">Key.getDomainType()</a> - method return the result {@code Ujo.class} always </li>
           <li><a href="http://ujorm.org/javadoc/org/ujorm/Key.html#add(org.ujorm.Key)">Key.add(org.ujorm.Key)</a> - method is not supported by the default implementation</li>
           <li><a href="http://ujorm.org/javadoc/org/ujorm/Key.html#descending()">Key.descending()</a> - result is not type of WeakKey</li>
           <li><a href="http://ujorm.org/javadoc/org/ujorm/core/KeyRing.html">KeyRing</a> serialization is not supported</li>
         </ul>
         , and some more methods are not fully type-safe.
         To create new keys use an instance of the factory class WeakKeyFactory.

         <h3>The sample of use</h3>
         <pre class="pre">
<span class="keyword-directive">public</span> <span class="keyword-directive">class</span> MyService {
    <span class="keyword-directive">private</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> WeakKeyFactory f = <span class="keyword-directive">new</span> WeakKeyFactory(MyService.<span class="keyword-directive">class</span>);

    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> WeakKey&lt;String&gt;     NAME = f.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> WeakKey&lt;Date&gt;       BORN = f.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> WeakKey&lt;Boolean&gt;    WIFE = f.newKeyDefault(Boolean.TRUE);
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> WeakKey&lt;BigDecimal&gt; CASH = f.newKeyDefault(BigDecimal.ZERO);

    <span class="keyword-directive">static</span> {
        f.lock(); <span class="comment">// Initialize all keys and lock them</span>
    }

    <span class="comment">/** Sample how to use weak keys with a Map. */</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">void</span> testWeakKeys2Map() {
        Map&lt;String,Object&gt; map = <span class="keyword-directive">new</span> HashMap&lt;String, Object&gt;();

        <span class="keyword-directive">assert</span> NAME.of(map) == <span class="keyword-directive">null</span>;
        <span class="keyword-directive">assert</span> BORN.of(map) == <span class="keyword-directive">null</span>;
        <span class="keyword-directive">assert</span> WIFE.of(map) == Boolean.TRUE;
        <span class="keyword-directive">assert</span> CASH.of(map) == BigDecimal.ZERO;

        <span class="keyword-directive">final</span> String name = <span class="character">&quot;</span><span class="character">Lucy</span><span class="character">&quot;</span>;
        <span class="keyword-directive">final</span> Boolean wife = <span class="keyword-directive">true</span>;
        <span class="keyword-directive">final</span> Date today = <span class="keyword-directive">new</span> Date();
        <span class="keyword-directive">final</span> BigDecimal cash = BigDecimal.TEN;

        NAME.setValue(map, name);
        BORN.setValue(map, today);
        WIFE.setValue(map, wife);
        CASH.setValue(map, cash);

        <span class="keyword-directive">assert</span> NAME.of(map).equals(name);
        <span class="keyword-directive">assert</span> BORN.of(map).equals(today);
        <span class="keyword-directive">assert</span> WIFE.of(map).equals(wife);
        <span class="keyword-directive">assert</span> CASH.of(map).equals(cash);
    }

    <span class="comment">/** Similar sample how to use weak keys with a List. */</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">void</span> testWeakKeys2List() {
        List&lt;Object&gt; list = <span class="keyword-directive">new</span> ArrayList&lt;Object&gt;();

        <span class="comment">// and the same code works for the List instance:</span>
        <span class="keyword-directive">assert</span> NAME.of(list) == <span class="keyword-directive">null</span>;
        <span class="keyword-directive">assert</span> BORN.of(list) == <span class="keyword-directive">null</span>;
        <span class="keyword-directive">assert</span> WIFE.of(list) == Boolean.TRUE;
        <span class="keyword-directive">assert</span> CASH.of(list) == BigDecimal.ZERO;

        <span class="keyword-directive">final</span> String name = <span class="character">&quot;</span><span class="character">Lucy</span><span class="character">&quot;</span>;
        <span class="keyword-directive">final</span> Boolean wife = <span class="keyword-directive">true</span>;
        <span class="keyword-directive">final</span> Date today = <span class="keyword-directive">new</span> Date();
        <span class="keyword-directive">final</span> BigDecimal cash = BigDecimal.TEN;

        NAME.setValue(list, name);
        BORN.setValue(list, today);
        WIFE.setValue(list, wife);
        CASH.setValue(list, cash);

        <span class="keyword-directive">assert</span> NAME.of(list).equals(name);
        <span class="keyword-directive">assert</span> BORN.of(list).equals(today);
        <span class="keyword-directive">assert</span> WIFE.of(list).equals(wife);
        <span class="keyword-directive">assert</span> CASH.of(list).equals(cash);
    }
}</pre>

         The next example shows some interesting features of the Key object.

<pre class="pre">
    <span class="comment">/**</span> <span class="comment">Test</span> <span class="comment">key</span> <span class="comment">attributes</span> <span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">void</span> testWeakKeyAttributes() {
        <span class="keyword-directive">assert</span> NAME.getIndex()==0;
        <span class="keyword-directive">assert</span> BORN.getIndex()==1;
        <span class="keyword-directive">assert</span> WIFE.getIndex()==2;
        <span class="keyword-directive">assert</span> CASH.getIndex()==3;

        <span class="keyword-directive">assert</span> NAME.getName().equals(<span class="character">&quot;</span><span class="character">name</span><span class="character">&quot;</span>);
        <span class="keyword-directive">assert</span> BORN.getName().equals(<span class="character">&quot;</span><span class="character">born</span><span class="character">&quot;</span>);
        <span class="keyword-directive">assert</span> WIFE.getName().equals(<span class="character">&quot;</span><span class="character">wife</span><span class="character">&quot;</span>);
        <span class="keyword-directive">assert</span> CASH.getName().equals(<span class="character">&quot;</span><span class="character">cash</span><span class="character">&quot;</span>);

        <span class="keyword-directive">assert</span> NAME.isTypeOf(CharSequence.<span class="keyword-directive">class</span>);
        <span class="keyword-directive">assert</span> BORN.isTypeOf(Date.<span class="keyword-directive">class</span>);
        <span class="keyword-directive">assert</span> WIFE.isTypeOf(Boolean.<span class="keyword-directive">class</span>);
        <span class="keyword-directive">assert</span> CASH.isTypeOf(BigDecimal.<span class="keyword-directive">class</span>);
    }</pre>

        <h3>Where to use the WeakKey?</h3>
        <ul>
            <li>the WeakKey can be useful on support any Map with a String key for better type-safe features</li>
            <li>a Map implementation can be simply replaced by the List if you like</li>
            <li>reading parameters from the HttpRequest object with the target result type</li>
            <li>support to building URL parameters</li>
            <li>Spring module provides a special class <code>AbstractAplicationContextAdapter</code> to get Spring services by the WeakKey, see <a href="http://sourceforge.net/p/ujoframework/svn/HEAD/tree/trunk/project-m2/ujo-spring/src/test/java/org/ujorm/spring/AplicationContextAdapter.java?view=markup">the example</a></li>
            <li>understanding the WeakKey serves as a great introduction to the Ujo architecture.</li>
        </ul>

        <h2 id="how">My first Ujo object</h2>
        Ujo interface is an envelope for any data source. Ujo object have got your own related Keys always.
        So, how to write the first Ujo object? The fastest way is to use some abstract UJO implementation from this project and via few code lines we can make quickly
        and easily our own implementation, too. Here is an example - the implementation of the <i>Person</i> class by an abstract <a href="#Changes">AbstractUjo</a> class.

        <h3>The class code</h3>
        The typical implementation of the <i>Person</i> class based on the <a href="core/AbstractUjo.html">AbstractUjo</a>:

<pre class="pre"><span class="java-keywords">public</span> <span class="java-keywords">class</span> <span class="highlight">Person</span> <span class="java-keywords">extends</span> AbstractUjo {
  <span class="java-keywords">private static final</span> KeyFactory&lt;Person&gt; f = <span class="java-layer-method">newFactory</span>(<span class="highlight">Person</span>.<span class="java-keywords">class</span>);

  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,String &gt; NAME = f.<span class="java-layer-method">newKey</span>();
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,Boolean&gt; MALE = f.<span class="java-layer-method">newKey</span>();
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,Double &gt; CASH = f.<span class="java-layer-method">newKey</span>();

  <span class="java-annotation">@</span>Override <span class="java-keywords">public</span> <span class="java-keywords">KeyList</span>&lt;?&gt; <span class="java-layer-method">readKeys</span>() {
      <span class="java-keywords">return</span> f.<span class="java-layer-method">getKeys</span>();
  }
}</pre>

        or more easy implementation <strong>without</strong> the class <a href="core/KeyFactory.html">KeyFactory</a> for a child of the class <a href="implementation/quick/SmartUjo.html">SmartUjo</a>:

<pre class="pre"><span class="java-keywords">public</span> <span class="java-keywords">class</span> <span class="highlight">Person</span> <span class="java-keywords">extends</span> SmartUjo {<br>
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,String &gt; NAME = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,Boolean&gt; MALE = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">Person</span>,Double &gt; CASH = <span class="java-layer-method">newKey</span>();<br>
}</pre>


        Now, when the <i>Person</i> class is done, we can make its instance and enter or fetch some data. It´s possible to use one of two API methods for writing the object attributes:
        <ol>
            <li><i>Person.<strong>writeValue</strong>(Key, Object)</i>, or</li>
            <li><i>Key.<strong>setValue</strong>(person, Object)</i>. </li>
        </ol>

        These methods are equivalent from a point of result, but the second solution offers the type safe access during the writing and reading of a value.
        A show of the second (2) method use up:

<pre class="pre"><span class="java-keywords">import static</span> org.Person.*;
Person person = <span class="java-keywords">new</span> <span class="java-layer-method">Person</span>();<br>
<span class="java-block-comment">// Writing:</span>
NAME.<span class="java-layer-method">setValue</span>(person, <span class="java-string-literal">"Pavel Ponec"</span>);
MALE.<span class="java-layer-method">setValue</span>(person, <span class="java-keywords">true</span>);
CASH.<span class="java-layer-method">setValue</span>(person, <span class="java-numeric-literals">34.5</span>);<br>
<span class="java-block-comment">// Reading:</span>
String  name = NAME.<span class="java-layer-method">of</span>(person); <span class="java-block-comment">// method of() is an alias for Key.getValue()</span>
<span class="java-keywords">boolean</span> male = MALE.<span class="java-layer-method">of</span>(person);
<span class="java-keywords">double</span>  cash = CASH.<span class="java-layer-method">of</span>(person);
<br></pre>

     There is possible to use an <strong>extended API</strong> with a more obvious source code
     to the property access since the UJO <strong>release 0.80</strong>.
     The new solution allows to you a chaining more keys according to the model of a language
     <a href="http://en.wikipedia.org/wiki/Groovy_(programming_language)">Groovy</a>.
     The new API extends the old one so that you can use an combination of both types.

<pre class="pre"><span class="java-keywords">import static</span> org.Person.*;
Person person = <span class="java-keywords">new</span> <span class="java-layer-method">Person</span>(); <span class="java-block-comment">// An extension of MapUjoExt</span><br>
<span class="java-block-comment">// Writing:</span>
person.<span class="java-layer-method">set</span>(NAME, <span class="java-string-literal">"Pavel Ponec"</span>);
person.<span class="java-layer-method">set</span>(MALE, <span class="java-keywords">true</span>);
person.<span class="java-layer-method">set</span>(CASH, <span class="java-numeric-literals">34.5</span>);<br>
<span class="java-block-comment">// Reading:</span>
String  name = person.<span class="java-layer-method">get</span>(NAME);
<span class="java-keywords">boolean</span> male = person.<span class="java-layer-method">get</span>(MALE);
<span class="java-keywords">double</span>  cash = person.<span class="java-layer-method">get</span>(CASH);
<br></pre>

        <strong>A note:</strong><br>
        If you use a compilation parameter <strong>-Xlint:unchecked</strong>, an assembler can warn you of absent declaration of generic data types in the Key initialization sometimes.
        There are three possibilities now:<br>
        <ul>
            <li>to complement the generic data types to the right side of the expression according to the left side, or</li>
            <li>to switch off the <strong>-Xlint:unchecked</strong> parameter. The switched off parameter is implied to the IDE NetBeans setting.</li>
            <li>the class can be equipped an annotation <i>@SuppressWarnings("unchecked")</i>
                <br>I've chosen this possibility myself, the code is getting clearer and in the case
                of collision in the same line it´s possible to find it out easily.</li>
            <li>since version 0.72 is possible to use a type safe method <strong>newKey(name, type)</strong> pro building a Property object.</li>
        </ul>
        <h3>The implementation of the equals() method</h3>
        Our <i>Person</i> class has the <i>equals()</i> function implemented already, which inherited from parental class <i>AbstractUjo</i>.
        But if you want by some reason to write your own Ujo implementation with this method, it´s enough to write into the class this code:

<pre class="pre"><span class="java-keywords">public</span> <span class="java-keywords">boolean</span> <span class="java-layer-method">equals</span>(Object obj) {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">equals</span>(<span class="java-keywords">this</span>, (Ujo) obj );
}
</pre>

        <h3>Implementation of the clone() method</h3>
        Analogous to the equals method you can make the <i>clone()</i> method :
<pre class="pre"><span class="java-keywords">public</span> Object <span class="java-layer-method">clone</span>() {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">clone</span>(<span class="java-keywords">this</span>, 1, <span class="java-keywords">null</span>);
}
</pre>

        <h3>Implementation of the hash() method</h3>
        A similar example of the <i>hash()</i> method implementation:
<pre class="pre"><span class="java-keywords">public</span> <span class="java-keywords">int</span> <span class="java-layer-method">hash</span>() {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">getHash</span>(<span class="java-keywords">this</span>);
}
</pre>
        All of these implementations are generally applicable to all the Ujo objects posterity.

   <h2 id="keyFactory2Interface">Using the KeyFactory in interfaces</h2>
        In some cases can be useful to define Ujo Keys in an interface. See the next simple example how to design the inteface using the class KeyFactory:

<pre class="pre"><span class="keyword-directive">public</span> <span class="keyword-directive highlight">interface</span> MyUjoInterface <span class="keyword-directive">extends</span> Ujo {
    <span class="comment">/** The factory will be an immutable object after locking */</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> KeyFactory&lt;MyUjoInterface&gt; $factory
            = KeyFactory.CamelBuilder.get(MyUjoInterface.<span class="keyword-directive">class</span>);

    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;MyUjoInterface,Long&gt;      PRO_P0 = $factory.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;MyUjoInterface,Integer&gt;   PRO_P1 = $factory.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;MyUjoInterface,String&gt;    PRO_P2 = $factory.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;MyUjoInterface,Date&gt;      PRO_P3 = $factory.newKey();
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> ListKey&lt;MyUjoInterface,Float&gt; PRO_P4 = $factory.newListKey();

    <span class="comment">/**</span> <span class="comment">Size</span> <span class="comment">of</span> <span class="comment">the</span> <span class="comment">all</span> <span class="comment">keys</span> <span class="comment">and</span> <span class="comment">lock</span> <span class="comment">internal</span> <span class="comment">factory</span><span class="comment">.</span> <span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> <span class="keyword-directive">int</span> KEY_SIZE = $factory.lockAndSize();

}</pre>

     The interface <code>MyUjoInterface</code> can be a child of another Ujo interface optionally,
     however an implementation of multiple interfaces is not recommended due to the risk of duplicate Key indexes.
     The next example shows a sample of a real implementation:

<pre class="pre">
<span class="keyword-directive">public</span> <span class="keyword-directive highlight">class</span> MyUjoImpl <span class="keyword-directive">implements</span> MyUjoInterface {
    <span class="keyword-directive">private</span> Object[] data = <span class="keyword-directive">new</span> Object[KEY_SIZE];

    <span class="comment">@Override</span>
    <span class="keyword-directive">public</span> KeyList&lt;?&gt; readKeys() {
        <span class="keyword-directive">return</span> $factory.getKeys();
    }

    <span class="comment">@Override</span>
    <span class="keyword-directive">public</span> Object readValue(Key property) {
        <span class="keyword-directive">return</span> data[property.getIndex()];
    }

    <span class="comment">@Override</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">void</span> writeValue(Key property, Object value) {
        data[property.getIndex()] = value;
    }

    <span class="comment">@Override</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">boolean</span> readAuthorization(UjoAction action, Key property, Object value) {
        <span class="keyword-directive">return</span> <span class="keyword-directive">true</span>;
    }
}
</pre>
     <p>&nbsp;</p>

     <h2 id="defaultvalues">Default values</h2>

        A JavaBean property can have got a default value by the sample:
<pre class="pre">{
  <span class="java-keywords">private</span> Double cash = <span class="java-numeric-literals highlight">10.0</span>;
}</pre>

        Also the UJO property can have got a default value. All the implementations of method Ujo.readValue(...) from this frameworks
        replaces an undefined value (NULL) by the default value from the Key.

<pre class="pre">{
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;Person, Double&gt; CASH = <span class="java-layer-method">newKey</span>(<span class="java-string-literal">&quot;Cash&quot;</span>, <span class="java-numeric-literals highlight">10.0</span>);
}</pre>

        Note, you can change a default <strong>key name</strong> also using the first text parameter.
        The default property name have got
        <ul>
        <li>the same value as its property field in the SmartUjo implementation</li>
        <li>key name created by the KeyFactory depemds on its KeyFactory implementations, you can choice a "cammelCase" key name name builder for example</li>
        </ul>

        Special features:
        <ul>
            <li>the default value is available even if the original property value is changed</li>
            <li>if any property value is changed to a NULL then the property method returns the default value (the feature can be suppressd by overriding method: Ujo.readProperty)</li>
            <li>an implementation if the interface Key provides some methods to use the default value</li>
        </ul>
        <p>&nbsp;</p>


        <h2 id="validators">Validators</h2>
        The framework provides a special interface to validation a data input value.
        The Ujorm validators have got a similar meaning for Ujo object how the
        <a href="http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html_single/">Bean Validation (JSR 303)</a>
        implementation for the JavaBeans. The main diferences are:
        <table style="margin-top: 20px;">
            <tr><th style="text-align: left;">Ujo Validation</th><th style="text-align: left;">Bean Validation (JSR 303)</th></tr>
            <tr><td><ul>
                        <li>validator can be assigned on a Key of an Ujo implementation using the Java code</li>
                        <li>assigned validator is evaluated on the event of each entry values</li>
                        <li>validators can be joined using AND / OR operator</li>
                    </ul>
            </td><td><ul>
                        <li>validator is assigned on a field of a java-bean implementation using an annotation or XML</li>
                        <li>assigned validator is evaluead on an special event</li>
                        <li>validators can be joined using AND operator</li>
                    </ul>
            </td></tr>
        </table>

        <h3 id="validators">Using the validator</h3>
        There is an short example how to use the Ujorm Validator:
<pre class="pre">
    Integer maxValidValue = 10;
    Integer <span class="highlight">wrongValue</span> = 120;
    Validator&lt;Integer&gt; maxValidator = Validator.<span class="ST0">Build</span>.<span class="ST0">max</span>(maxValidValue);
    ValidationError error = maxValidator.validate(<span class="highlight">wrongValue</span>, <span class="keyword-directive">null</span>, <span class="keyword-directive">null</span>);

    <span class="comment">// Get the default message:</span>
    String defaultMessage = error.getDefaultMessage();

    <span class="comment">// Or get a <strong>localized</strong> message using your template:</span>
    String template = <span class="character">"My input ${INPUT} must be up to ${LIMIT}."</span>;
    String myMessage = error.getMessage(template);
    <span class="ST0">assertEquals</span>(<span class="character">"My input <span class="highlight">120</span> must be up to 10."</span>, myMessage);
</pre>

If the validation check is correct, then the method Validator.validate(..) returns the NULL value, else the method returns an instance of the ValidationError class.
Each the instance of the class ValidationError provides the default validation message and offers tools to create a localized message using a user template with named parameters
with the format: <strong>${argument,format}</strong>, where the optional <strong>format</strong> phrase have got the same syntax as the tool {@link java.util.Formatter}.
Each Ujorm validator contains at least three argument values:
<ul>
    <li>${INPUT} - the input value</li>
    <li>${KEY} - the Ujo-key instance passed to the <strong>validate()</strong> method as a nullable argument.</li>
    <li>${MARK} - this sequence is replaced for the two-character mark: "${"</li>
</ul>

More arguments depends on the Validator implementation and their descriptions are referred to in JavaDoc.
On the second example is an extended solution.
<pre class="pre">
<span class="keyword-directive">import</span> <span class="keyword-directive">static</span> org.ujorm.validator.impl.BetweenValidator.*;
    ...
    Integer minValidValue = 1;
    Integer maxValidValue = 9;
    Integer <span class="highlight">wrongValue</span> = 130;

    Validator&lt;Integer&gt; rangeValidator = Validator.<span class="ST0">Build</span>.<span class="ST0">range</span>(minValidValue, maxValidValue);
    ValidationError error = rangeValidator.validate(<span class="highlight">wrongValue</span>, ValidBo.<span class="ST1">CODE</span>, <span class="keyword-directive">null</span>);
    <span class="comment">//</span>
    String expectedDefaultMesage = <span class="character">&quot;</span><span class="character">An attribute ValidBo.code must be between 1 and 9 (including)</span><span class="character">&quot;</span>
            + <span class="character">&quot;</span><span class="character">, but the input is: 130</span><span class="character">&quot;</span>;
    <span class="ST0">assertEquals</span>(expectedDefaultMesage, error.getDefaultMessage());
    <span class="comment">//</span>
    String expectedMyMesage = <span class="character">&quot;</span><span class="character">My input is not between 1 and 9</span><span class="character">&quot;</span>;
    String myTemplate = <span class="character">&quot;</span><span class="character">My input is not between ${MIN} and ${MAX}</span><span class="character">&quot;</span>;
    String message = error.getMessage(myTemplate, Locale.<span class="ST1">ENGLISH</span>);
    <span class="ST0">assertEquals</span>(expectedMyMesage, message);
    <span class="comment">//</span>
    Object[] arrayTemplate = {<span class="character">&quot;</span><span class="character">My input is not between </span><span class="character">&quot;</span>, <span class="ST1">MIN</span>, <span class="character">&quot;</span><span class="character"> and </span><span class="character">&quot;</span>, <span class="ST1">MAX</span>};
    <span class="ST0">assertEquals</span>(expectedMyMesage, error.getMessage(arrayTemplate, Locale.<span class="ST1">ENGLISH</span>));
    <span class="ST0">assertEquals</span>(myTemplate, <span class="keyword-directive">new</span> MessageService().template(myTemplate));
</pre>

<h4 id="validatorOnTheKey">Validator on the Key</h4>
    Any Validator imlementation can be assigned to an immutable Ujo-key.
    In this case any event of writting on the key will be checked by the assigned Validator.
    The default Key value is not be validated similar
    as any value written out from the Key because the value is not written using the Key.
    See some examples to building the key:

    <pre class="pre">
<span class="keyword-directive">public</span> <span class="keyword-directive">class</span> <span class="ST0">ValidBo</span> <span class="keyword-directive">extends</span> AbstractUjo {

    <span class="comment">/**</span> <span class="comment">Factory</span> <span class="comment">*/</span>
    <span class="keyword-directive">private</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> KeyFactory&lt;ValidBo&gt; <span class="ST1">f</span> = <span class="ST2">newFactory</span>(ValidBo.<span class="keyword-directive">class</span>);
    <span class="comment">/**</span> <span class="comment">Documentation</span><span class="comment">: </span><span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;ValidBo, Long&gt; <span class="ST1">PID</span> = <span class="ST1">f</span>.newKey(<span class="ST2">notNull</span>());
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;ValidBo, Integer&gt; <span class="ST1">CODE</span> = <span class="ST1">f</span>.newKey(<span class="ST2">between</span>(0, 10));
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;ValidBo, String&gt; <span class="ST1">NAME</span> = <span class="ST1">f</span>.newKey(<span class="ST2">regexp</span>(<span class="character">&quot;</span><span class="character">T.*T</span><span class="character">&quot;</span>));
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> Key&lt;ValidBo, Double&gt; <span class="ST0">CASH</span> = <span class="ST0">f</span>.newKey(<span class="ST1">min</span>(0.0).and(<span class="ST1">notNull</span>()));

    <span class="keyword-directive">static</span> {
        <span class="ST1">f</span>.lock();
    }
}
</pre>

The most of Ujorm Validators allows the <strong>null</strong> value,
however there is possible to join one validator with another one, see the key name "CASH" for example how to do it.
There are four methods to create a non-null validator: Build.notNull(), Bulid.notEmpty(), Build.notBlank() and Build.readOnly().

<h4 id="userValidator">Create a user validator</h4>
The simple way to make your own validator is to create a child of the AbstractValidator and overwrite the method: validate(...).
The next example is an implementaiton from the Ujorm-core:

<pre class="pre">
<span class="keyword-directive">public</span> <span class="keyword-directive">class</span> <span class="ST0">BetweenValidator</span>&lt;VALUE <span class="keyword-directive">extends</span> Comparable&gt; <span class="keyword-directive">extends</span> AbstractValidator&lt;VALUE&gt; {

    <span class="comment">/**</span> <span class="comment">Serializable</span> <span class="comment">minimum</span><span class="comment"> (</span><span class="comment">inclusive</span><span class="comment">) </span><span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> MessageArg <span class="ST1">MIN</span> = <span class="keyword-directive">new</span> MessageArg(<span class="character">&quot;</span><span class="character">MIN</span><span class="character">&quot;</span>);
    <span class="comment">/**</span> <span class="comment">Serializable</span> <span class="comment">maximum</span><span class="comment"> (</span><span class="comment">exclusive</span><span class="comment">) </span><span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="keyword-directive">static</span> <span class="keyword-directive">final</span> MessageArg <span class="ST1">MAX</span> = <span class="keyword-directive">new</span> MessageArg(<span class="character">&quot;</span><span class="character">MAX</span><span class="character">&quot;</span>);

    <span class="comment">/**</span> <span class="comment">Serializable</span> <span class="comment">minimum</span><span class="comment"> (</span><span class="comment">inclusive</span><span class="comment">) </span><span class="comment">*/</span>
    <span class="keyword-directive">protected</span> <span class="keyword-directive">final</span> Comparable <span class="ST2">min</span>;
    <span class="comment">/**</span> <span class="comment">Serializable</span> <span class="comment">maximum</span><span class="comment"> (</span><span class="comment">exclusive</span><span class="comment">) </span><span class="comment">*/</span>
    <span class="keyword-directive">protected</span> <span class="keyword-directive">final</span> Comparable <span class="ST2">max</span>;

    <span class="comment">/**</span>
<span class="comment">     * </span><span class="ST3">Between</span> <span class="ST3">validator</span>
<span class="comment">     * </span><span class="ST3">@param</span> min <span class="comment">Serializable</span> <span class="comment">minimum</span><span class="comment"> (</span><span class="comment">inclusive</span><span class="comment">)</span>
<span class="comment">     * </span><span class="ST3">@param</span> max <span class="comment">Serializable</span> <span class="comment">maximum</span><span class="comment"> (</span><span class="comment">exclusive</span><span class="comment">)</span>
     <span class="comment">*/</span>
    <span class="keyword-directive">public</span> <span class="ST0">BetweenValidator</span>(VALUE min, VALUE max) {
        <span class="keyword-directive">this</span>.<span class="ST2">min</span> = min;
        <span class="keyword-directive">this</span>.<span class="ST2">max</span> = max;
    }

    <span class="comment">/**</span><span class="comment"> {</span><span class="ST3">@Inherited</span><span class="comment">} </span><span class="comment">*/</span>
    <span class="keyword-directive">public</span> &lt;UJO <span class="keyword-directive">extends</span> Ujo&gt; ValidationError <span class="ST0">validate</span>(VALUE input
            , Key&lt;UJO, VALUE&gt; key
            , UJO bo
            ) {
            <span class="keyword-directive">final</span> <span class="keyword-directive">boolean</span> ok = input==<span class="keyword-directive">null</span>
                    || input.compareTo(<span class="ST2">min</span>) &gt;= 0
                    &amp;&amp; input.compareTo(<span class="ST2">max</span>) &lt; 0;
            <span class="keyword-directive">return</span> !ok ? <span class="keyword-directive">new</span> ValidationError
                    ( input
                    , key
                    , bo
                    , getClass()
                    , getLocalizationKey()
                    , getDefaultTemplate()
                    , <span class="ST1">service</span>.map
                    ( <span class="ST1">MIN</span>, <span class="ST2">min</span>
                    , <span class="ST1">MAX</span>, <span class="ST2">max</span>
                    ))
                    : <span class="keyword-directive">null</span>;
    }

    <span class="comment">/** Returns a default message */</span>
    <span class="comment">@Override</span>
    <span class="keyword-directive">protected</span> String <span class="ST0">getDefaultTemplate</span>() {
        <span class="keyword-directive">return</span> <span class="ST1">service</span>.template(<span class="character">&quot;</span><span class="character">An attribute </span><span class="character">&quot;</span>, <span class="ST1">KEY</span>, <span class="character">&quot;</span><span class="character"> must be between </span><span class="character">&quot;</span>
                , <span class="ST1">MIN</span>, <span class="character">&quot;</span><span class="character"> and </span><span class="character">&quot;</span>, <span class="ST1">MAX</span>, <span class="character">&quot;</span><span class="character"> (excluding), but the input is: </span><span class="character">&quot;</span>, <span class="ST1">INPUT</span>);
    }

    <span class="comment">/** Default value is: &quot;org.ujorm.between&quot; */</span>
    <span class="keyword-directive">public</span> String <span class="ST0">getLocalizationKey</span>() {
        <span class="keyword-directive">return</span> <span class="ST1">KEY_PREFIX</span> + <span class="character">&quot;</span><span class="character">between</span><span class="character">&quot;</span>;
    }
}
</pre>

See the <a href="validator/AbstractValidator.html">JavaDoc</a> for some more validator implementations.


        <h2 id="ujoext">Extended Ujo</h2>
        The most of information in this tutorial are related to a basic <a href="Ujo.html">Ujo</a> interface however since a version Ujorm 0.80 is available an extended interface
        called UjoExt for an&nbsp;easier utilization in a source code. The extended features are described by a <a href="http://ujorm.org/presentation/">slide show</a> format in a different document
        or you can try an <a href="extensions/UjoExt.html">UjoExt</a> JavaDoc description.
        <p>&nbsp;</p>


        <h2 id="javabean">The JavaBean implements Ujo</h2>
        It´s easy to create a JavaBean from an UJO object. It´s enough to implement a setter and a getter for each attribute. An example of usage:
<pre class="pre">
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> SmartUjo {<br>
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;Person, String&gt; NAME = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;Person, Double&gt; CASH = <span class="java-layer-method">newKey</span>();<br>
  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">setName</span>(String name) {
    NAME.<span class="java-layer-method">setValue</span>(<span class="java-keywords">this</span>, name);
  }
  <span class="java-keywords">public</span> String <span class="java-layer-method">getName</span>() {
    <span class="java-keywords">return</span> <span class="java-layer-method">NAME</span>.getValue(<span class="java-keywords">this</span>);
  }
  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">setCash</span>(<span class="java-layer-method">Double</span> cash) {
    CASH.<span class="java-layer-method">setValue</span>(<span class="java-keywords">this</span>, cash);
  }
  <span class="java-keywords">public</span> <span class="java-layer-method">Double</span> <span class="java-layer-method">getCash</span>() {
    <span class="java-keywords">return</span> CASH.<span class="java-layer-method">getValue</span>(<span class="java-keywords">this</span>);
  }
}</pre>

There is possible to use an special implementation <a href="implementation/bean/BeanUjo.html">BeanUjo</a> to an implementation UJO features to your complete JavaBeans.
This <strong>BeanUjo</strong> implementation calls JavaBean setters and getters by a Java reflection for writing and reading values (fields).
A name of Ujo property must accord with a related name of the JavaBean attribute (methods) in the implementation.
There is allowed to use a primitive types of the object fields if you can (e.g. Double -> double).
<pre class="pre">
<span class="java-keywords">import</span> org.ujorm.implementation.bean.*;
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> <span class="highlight">BeanUjo</span> {<br>
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> BeanProperty&lt;Person, String&gt; NAME = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> BeanProperty&lt;Person, Double&gt; CASH = <span class="java-layer-method">newKey</span>();

  <span class="java-keywords">private</span> String myname;
  <span class="java-keywords">private</span> Double mycash;

  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">set<span class="highlight">Name</span></span>(String name) {
    <span class="java-keywords">this</span>.myname = name;
  }
  <span class="java-keywords">public</span> String <span class="java-layer-method">get<span class="highlight">Name</span></span>() {
    <span class="java-keywords">return</span> myname;
  }
  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">set<span class="highlight">Cash</span></span>(<span class="java-layer-method">Double</span> cash) {
    <span class="java-keywords">this</span>.mycash = cash;
  }
  <span class="java-keywords">public</span> <span class="java-layer-method">Double</span> <span class="java-layer-method">get<span class="highlight">Cash</span></span>() {
    <span class="java-keywords">return</span> mycash;
  }
}</pre>

        <strong>Keep the mind</strong> that getters of implementation <strong>BeanUjo</strong> don't call a method Ujo.readProperty(..) similar like setters don't call Ujo.writeProperty().
        For example this is the reason why method getCash() can't return a default value from Key for example.
        The way NAME.getValue(...) works fine.

        <h2 id="xml">XML serialization</h2>
        Usage of an UJO serialization is very simple, that is how the code looks like:
<pre class="pre">Person person = somePersonProvider().getPerson();<br>
<span class="java-block-comment">// Make Serialization:</span>
UjoManagerXML.<span class="java-layer-method">getInstance</span>().<span class="java-layer-method">saveXML</span>(writer, person, <span class="java-keywords">null</span>, <span class="java-string-literal">"My Export"</span>);<br>
<span class="java-block-comment">// Make Deserialization:</span>
person = UjoManagerXML.<span class="java-layer-method">getInstance</span>().<span class="java-layer-method">parseXML</span>(inputStream, Person.<span class="java-keywords">class</span>, <span class="java-string-literal">"My Import"</span>);<br>
</pre>

        A content of created XML is now:
<pre class="pre"><span class="xml-pi-start">&lt;?</span><span class="xml-pi-start">xml</span> <span class="xml-pi-content">version="1.0" encoding="UTF-8"</span><span class="xml-pi-start">?&gt;</span>
<span class="xml-tag">&lt;body</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;NANE</span><span class="xml-tag">&gt;</span>Pavel Ponec<span class="xml-tag">&lt;/NAME</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;MALE</span><span class="xml-tag">&gt;</span>true<span class="xml-tag">&lt;/MALE</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;CASH</span><span class="xml-tag">&gt;</span>34.5<span class="xml-tag">&lt;/CASH</span><span class="xml-tag">&gt;</span>
<span class="xml-tag">&lt;/body</span><span class="xml-tag">&gt;</span>
</pre>

<h3 id="listProperty">List property</h3>
It´s often very useful some attribute to contain a <strong>list</strong> of another UJO objects.
It´s possible to make the <strong>ArrayList&lt;UjoItem&gt;</strong> type object though, but preferable is to use for an attribute the <a href="#">ListProperty</a> class.
The first reason is a clearer content of an export to XML, because an export doesn't contain the information about the data type items of the list.
I recommend to read up API for more detailed information.
   <br>&nbsp;<br>

Recommended solution for the implementation of a link <strong>1:N</strong> for the Person - Child objects.
<pre class="pre">
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> AbstractUjo {
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key &lt;Person,String&gt; NAME  = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> ListProperty&lt;Person,Child&gt; CHILDREN = <span class="java-layer-method">newListKey</span>();
}
</pre>

       <h3 id="xmlAuthorization">Hidden elements</h3>
       What to do, when you need to export only some of the UJO object attributes and to ignore the rest?
       There is the <strong>readAuthorization(...)</strong> method for this case.
       <br>This method can allow a participation of the chosen attributes in dependence on:

        <ul>
            <li>the action type (XML export, Resource Bundle export, ...) include an action context</li>
            <li>the attribute</li>
            <li>his value</li>
        </ul>

On the following example we will illustrate, how the suppression of the <strong>NAME</strong> attribute by an export into XML looks like:
<pre class="pre">
<span class="java-keywords">public</span> <span class="java-keywords">boolean</span> <span class="java-layer-method">readAuthorization</span>(UjoAction action, Key property, Object value) {
  <span class="java-keywords">switch</span>(action.getType()) {
    <span class="java-keywords">case</span> ACTION_XML_EXPORT:
      <span class="java-keywords">return</span> property!=NAME;
    <span class="java-keywords">default</span>: {
      <span class="java-keywords">return</span> <span class="java-keywords">super</span>.<span class="java-layer-method">readAuthorization</span>(action, property, value);
    }
  }
}</pre>

        Notice: because all the <i>Keys</i> of the UJO object are the final type, it is not necessary
        to compare by the <i>equals()</i> method, but it is possible to use a quicker operator  <strong>==</strong>.

<h3 id="xmlAttributes">The attributes</h3>
The Ujorm enables to write some <strong>keys</strong> like a XML attribute of the element contrary of the XML child element (it is a default feature).
The solution is to use an annotation <strong>@XmlAttribute</strong> by next sample:
<pre class="pre"><span class="java-annotation">@</span>XmlAttribute
<span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;Ujo,String&gt; NAME = <span class="java-layer-method">newKey</span>();
</pre>


        <h3 id="xmlBodyValue">Body value</h3>
        There is possible print the a one property value per object like an element <strong>body text</strong>.
        For the purpose is designed an annotation <strong>@XmlElementBody</strong> by next sample:
<pre class="pre"><span class="java-annotation">@</span>@XmlElementBody
<span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;Ujo,String&gt; MALE = <span class="java-layer-method">newKey</span>();
</pre>
        A content of the new XML file using both annotations <strong>@XmlAttribute</strong> and <strong>@XmlElementBody</strong> is next:
<pre class="pre"><span class="xml-pi-start">&lt;?</span><span class="xml-pi-start">xml</span> <span class="xml-pi-content">version="1.0" encoding="UTF-8"</span><span class="xml-pi-start">?&gt;</span>
<span class="xml-tag">&lt;body Name</span>="Pavel Ponec"<span class="xml-tag">&gt;</span>
  true
  <span class="xml-tag">&lt;CASH</span><span class="xml-tag">&gt;</span>34.5<span class="xml-tag">&lt;/CASH</span><span class="xml-tag">&gt;</span>
<span class="xml-tag">&lt;/body</span><span class="xml-tag">&gt;</span>
</pre>

        Some more features:
        <ul>
          <li>there is recommended that only one property was signed by the annotation XmlElementBody in the class</li>
          <li>if more XmlElementBody annotated keys are identified then the framework will be considered the valid property with the highest index</li>
          <li>if a property has an annotation XmlAttribute so the XmlElementBody is ignored.</li>
        </ul>

        <h2 id="csv">CSV serialization</h2>

The Ujorm support a CSV serialization and deserializationm, see the simple example:
<pre class="pre">
UjoManagerCSV manager = UjoManagerCSV.<span class="ST0">getInstance</span>(UjoCSV.<span class="keyword-directive">class</span>);
ByteArrayOutputStream out = <span class="keyword-directive">new</span> ByteArrayOutputStream();

<span class="comment">// Save the ujoList to an outputStream:</span>
manager.saveCSV(out, UjoManagerCSV.<span class="ST1">UTF_8</span>, <span class="ST2">ujoList</span>, <span class="character">&quot;</span><span class="character">CSV-Context</span><span class="character">&quot;</span>);

<span class="comment">// Restore original objects from the byte array:</span>
InputStream is = <span class="keyword-directive">new</span> ByteArrayInputStream(out.toByteArray());
List&lt;UjoCSV&gt; result = manager.loadCSV(<span class="keyword-directive">new</span> Scanner(is), <span class="character">&quot;</span><span class="character">CSV-Context</span><span class="character">&quot;</span>);

<span class="comment">// Check the first objects</span>
<span class="ST0">assertEquals</span>(<span class="ST2">ujoList</span>.get(0), result.get(0));
</pre>

Eeach Ujo object can disable some columns by a method "readAuthorization(..)" and an operation context (the String "CSV-Context" for the example above).

        <h2 id="tablemodel">Support of the JTable component</h2>
        The Ujorm contains a support for the UJO object list displaying in the JTable. For simple editable table creating it´s not necessary
        to create any new class, <strong>you can only create</strong> the <a href="swing/UjoTableModel.html">UjoTableModel</a> class instance and to set it to the <i>JTable</i> object using the <i>setModel()</i> method.
        Example of simple usage:

<pre class="pre">
<span class="java-block-comment">// Create a model for all attributes:</span>
UjoTableModel&lt;Person&gt; model = <span class="java-keywords">new</span> <span class="java-layer-method">UjoTableModel</span>(Person.NAME, Person.MALE, Person.BIRTH);
<span class="java-block-comment">// or simply: ... model = new UjoTableModel(Person.class)</span>
jTable.<span class="java-layer-method">setModel</span>(model);<br>
<span class="java-block-comment">// We can set an data optionally:</span>
List&lt;Person&gt; persons = <span class="java-keywords">new</span> <span class="java-layer-method">ArrayList</span>();
model.<span class="java-layer-method">setRows</span>(persons);<br>
</pre>

        Other possibilities of the <i>UjoTableModel</i> class::
        <pre class="pre">
<span class="java-block-comment">// Add a row:</span>
model.<span class="java-layer-method">addRow</span>(<span class="java-keywords">new</span> <span class="java-layer-method">Person</span>());<br>
<span class="java-block-comment">// Set a value:</span>
model.<span class="java-layer-method">setValueAt</span>(<span class="java-string-literal">"Prokop"</span>, <span class="java-numeric-literals">0</span>, Person.NAME );<br>
<span class="java-block-comment">// Get the last row of table:</span>
Person person = model.<span class="java-layer-method">getRowLast</span>();<br>
<span class="java-block-comment">// Sort the model:</span>
model.<span class="java-layer-method">sort</span>(Person.NAME); <span class="java-block-comment">// or descending:</span>
model.<span class="java-layer-method">sort</span>(Person.NAME.<span class="java-layer-method">descending()</span>);<br>
</pre>

        <h3>Confrontation with the AbstractTableModel</h3>
        For creating a new <strong>editable</strong> table data model you have to implement or overwrite a few methods of the <i>AbstractTableModel</i> abstract class.
        <ul style="color: rgb(192, 192, 192);">
            <li>getColumnName(int column)</li>
            <li>getColumnClass(int column)</li>
            <li>getColumnCount()</li>
            <li>getRowCount()</li>
            <li>getValueAt(int rowIndex, int columnIndex)</li>
            <li>setValueAt(Object value, int rowIndex, int columnIndex)</li>
        </ul>

        All of these methods in the UjoTableModel class you´ll get implemented yet.
        A name of the column and corresponding class are taken straightly from the <i>Key</i> object, a column list inputs in constructor.

        <h2 id="RingBuffer">Stream searching</h2>
        Framework provides a special tool for a very fast searching in a stream using the class RingBuffer.
        The static methods of this class allow you to search the contents placed between the two texts.
        See the next sample:
        <pre class="pre">
    <span class="keyword-directive">final</span> Reader reader = RingBuffer.<span class="ST0">createReader</span>(<span class="character">&quot;</span><span class="character">xxx ${abc} ${def} zzz</span><span class="character">&quot;</span>);

    String word1 = RingBuffer.<span class="ST0">findWord</span>(reader, <span class="character">&quot;</span><span class="character">${</span><span class="character">&quot;</span>, <span class="character">&quot;</span><span class="character">}</span><span class="character">&quot;</span>);
    <span class="ST0">assertEquals</span>(<span class="character">&quot;</span><span class="character">abc</span><span class="character">&quot;</span>, word1);

    String word2 = RingBuffer.<span class="ST0">findWord</span>(reader, <span class="character">&quot;</span><span class="character">${</span><span class="character">&quot;</span>, <span class="character">&quot;</span><span class="character">}</span><span class="character">&quot;</span>);
    <span class="ST0">assertEquals</span>(<span class="character">&quot;</span><span class="character">def</span><span class="character">&quot;</span>, word2);

    String word3 = RingBuffer.<span class="ST0">findWord</span>(reader, <span class="character">&quot;</span><span class="character">${</span><span class="character">&quot;</span>, <span class="character">&quot;</span><span class="character">}</span><span class="character">&quot;</span>);
    <span class="ST0">assertEquals</span>(<span class="character">&quot;&quot;</span>, word3);</pre>

        <h2 id="ORM">Object-relation mapping (ORM)</h2>
        The <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">object-relation mapping</a> (ORM) is a bridge between the object word
        and the relation database. Some features:

        <ul>
           <li>framework has a type safe query language which allows the java compiler find some syntax errors</li>
           <li>no confusing proxy business objects</li>
           <li>easy to configure the ORM model by java source code</li>
           <li>great performance</li>
        </ul>

        See a special page for <a href="orm/package-summary.html#ORM">more information</a>.

        <h2 id="inheritance">Ujo inheritance</h2>
        An inheritance of the UJO clasess are supported along the the next examples:
        <pre class="pre"><span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">class</span> <span class="highlight">PersonExt</span> <span class="java-keywords">extends</span> Person {
  <span class="java-keywords">private static final</span> KeyFactory&lt;Person&gt; f = <span class="java-layer-method">newFactory</span>(<span class="highlight">PersonExt</span>.<span class="java-keywords">class</span>);

  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">PersonExt</span>,Float&gt; WEIGHT = f.<span class="java-layer-method">newKey</span>();
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">PersonExt</span>,Date &gt; BORN   = f.<span class="java-layer-method">newKey</span>();

  <span class="java-annotation">@</span>Override <span class="java-keywords">public</span> <span class="java-keywords">KeyList</span>&lt;?&gt; <span class="java-layer-method">readKeys</span>() {
      <span class="java-keywords">return</span> f.<span class="java-layer-method">getKeys</span>();
  }
}</pre>

        Or the similar example <strong>without</strong> the class <a href="core/KeyFactory.html">KeyFactory</a> for a child of the class <a href="implementation/quick/SmartUjo.html">SmartUjo</a>:

        <pre class="pre"><span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">class</span> <span class="highlight">PersonExt</span> <span class="java-keywords">extends</span> Person {

  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">PersonExt</span>,Float&gt; WEIGHT = <span class="java-layer-method">newKey</span>();
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> Key&lt;<span class="highlight">PersonExt</span>,Date &gt; BORN   = <span class="java-layer-method">newKey</span>();<br>
}</pre>



        <h2 id="performance">Performance</h2>
        The processing performance of the UJO objects is dependent on the implementation. During the processing of the <i>AbstractUjo</i> type object
        is performance (writing/reading) approximately consistent with the operations writing/reading of the <i>HashMap</i> object.
        The <i>ArrayUjo</i> solution provides the quicker implementation, the JavaBean object is the speediest.<br>
        <br>
        There are the results of a simple mensuration in the following table.
        <br>Environment: Windows XP system, Intel DuoCore 1.66 MHz processor, 1GB RAM, JRE 6.0, Ujorm <span style="font-weight: bold">0.80</span>.
        <br>
        The test description:
        <ul>
            <li>a number of the test iterations is 5 million</li>
            <li>for each iteration a new instance of the <i>Ujo</i> interface will be created</li>
            <li>there is written the 10 attribute values into the object</li>
            <li>all the values will be read</li>
            <li>the object will be released for a Garbage collector.</li>
            <li>the result values are an arithmetic average from four tests</li>
            <li>executing clasess: ArrayUjoTest, MapUjoTest, BeanUjoTest, PojoTest from JUnit tests</li>
        </ul>

        <table style="text-align: left;" border="1" cellpadding="2" cellspacing="0">
             <tr valign="top">
                <th style="text-align: left;">Implementation</th>
                <th style="text-align: right;">Performance<br><span style="font-weight: normal;">[sec per 5M loops]</span></th>
                <th style="text-align: right; width: 100px;">Ratio<br><span style="font-weight: normal;">[%]</span></th>
            </tr>
            <tr>
                <td align="left">ArrayUjo</td>
                <td align="right">1.972</td>
                <td align="right">177</td>
            </tr>
            <tr>
                <td align="left">MapUjo</td>
                <td align="right">6.651</td>
                <td align="right">597</td>
            </tr>
            <tr>
                <td align="left">BeanUjo</td>
                <td align="right">20.995</td>
                <td align="right">1883</td>
            </tr>
            <tr style="font-style: italic; color: #AAAAFF;">
                <td align="left">JavaBean</td>
                <td align="right">1.115</td>
                <td align="right">100</td>
            </tr>
        </table>


        It´s evidently from the table, that the performance of the <i>ArrayUjo</i> implementation is high and it gets near to the JavaBeans object performance.
        The results can be affected in some cases by costs of making an instance of a primitive values.
        However the speed of JavaBeans dramatically drops near to <i>BeanUjo</i> value
        in case a property access via <strong>Java reflection</strong> tools.


        <p id="performancexml"><strong>The XML serialization of UJO objects</strong> is based on a quick SAX parser, performance tests are very favorable,
                   mainly a comparison to XML serialization implemented in JER (classes XMLEncoder, XMLDecoder).
        </p>
        A measurement was provided on the same PC like the last test (UJO release <span style="font-weight: bold">0.84</span>), all results are shown in next table.<br>
        A test description:<br>
        <ul>
            <li>all business object are the same type (in scope one test)</li>
            <li>every one business object contains a11 attributes including the one for a recursion type of ArrayList</li>
            <li>count of total instances is 6.000 objects</li>
            <li>maximal deep is 4 object levels</li>
            <li>test was performed by a class XmlSpeedTest2 (second pass) from JUnit tests</li>
            <li>the result values are an arithmetic average from four tests</li>
        </ul>
        <br>
        <table style="text-align: left;" border="1" cellpadding="2" cellspacing="0">
             <tr valign="top">
                <th style="text-align: left;">Implementation</th>
                <th style="text-align: right;">Time of serialization<br><span style="font-weight: normal;"> [sec]</span></th>
                <th style="text-align: right;">Time of deserialization<br><span style="font-weight: normal;"> [sec]</span></th>
                <th style="text-align: right;">Total ratio<br><span style="font-weight: normal;">[%]</span></th>
            </tr>
            <tr>
                <td align="left">ArrayUjo</td>
                <td align="right">0.332</td>
                <td align="right" style="color: red; font-weight:bold;">0.305</td>
                <td align="right">93</td>
            </tr>
            <tr>
                <td align="left">MapUjo</td>
                <td align="right">0.340</td>
                <td align="right">0.340</td>
                <td align="right">99</td>
            </tr>
            <tr>
                <td align="left">BeanUjo</td>
                <td align="right">0.375</td>
                <td align="right">0.336</td>
                <td align="right">104</td>
            </tr>
            <tr style="font-style: italic; color: #9999FF;">
                <td align="left">XMLEncoder</td>
                <td align="right">2.797</td>
                <td align="right">1.770</td>
                <td align="right">668</td>
            </tr>
            <tr style="font-style: italic; color: #9999FF;">
                <td align="left">JAXB</td>
                <td align="right">0.211</td>
                <td align="right">0.473</td>
                <td align="right">100</td>
            </tr>
        </table>

        <br>Conclusion: The XML serialization implemented in Ujorm is approximately six times faster
        in comparison with the XMLEncoder persistence implemented in JRE 6.0.
        The UJO speed of serialization is slightly smaller than the speed of the great JAXB framework,
        however all UJO implementations got a the <span style="color: red; font-weight:bold;">shortest time of deserialization</span>.

        <h2 id="possibilities">Other possibilities of usage?</h2>
        What are the other possibilities of usage?


        <h3>Commons</h3>
        <ul>
            <li><a href="criterion/Criterion.html">UjoCriteria</a> allows to search an Ujo objects from the list of Ujo objects.</li>
            <li><a href="extensions/PathProperty.html">PathProperty</a> class is an composite of a Key objects.
                The PathProperty class can be used wherever is used Key - with a one important exception:
                do not send the PathProperty object to methods Ujo.readValue(...) and Ujo.writeValue(...).</li>
            <li><a href="implementation/factory/FactoryUjo.html">FactoryUjo</a> is a generic object maker.</li>
        </ul>

        <h3>Persistence</h3>
        <ul>
            <li>you can save all the hierarchy of UJO objects in XML format by the help of the UjoManagerXML class. For another information see the UjoXml class.</li>
            <li>UJO object can be saved in the <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/PropertyResourceBundle.html">PropertyResourceBundle</a> format.</li>
            <li>see the <a href="orm/package-summary.html#ORM">ORM module</a> for more information about relation databases</li>
        </ul>


        <h3>Servlet</h3>
        The UJO usage in servlets is not described in detail yet, but the basic idea for the text characteristics processing of the ServletRequest object is circa here:
<pre class="pre">ServletRequest request;
UjoTextable person;
Key personName;
...
person.<span class="java-layer-method">writeValueString</span>(<span class="java-layer-method"></span>personName, request.<span class="java-layer-method">getParameters</span>(personName.<span class="java-layer-method">getName</span>());
</pre>

        <h2 id="refAppl">Referential Application</h2>
        The <a href="http://jworksheet.ponec.net/"><strong>jWorkSheet</strong></a> is a referential implementation of the framework.
        This Swing project is powered by the Ujorm. It is published under an open license on a home page <a href="http://jworksheet.ponec.net/">http://jworksheet.ponec.net/</a>.
        The <strong>jWorkSheet</strong> is an application for time tracking different projects.

        <br>You can study the usage of the UJO object persistence and its collaboration with a graphics component JTable on the source codes.
        The jWorkSheet application characteristics::<br>
        <ul>
            <li>all the persistence is realized by the Ujorm. It is used the saving into <strong>XML</strong> format in project,
                parameters are saved into the Resource Bundle format.</li>
            <li>all the data models of the JTable object are straight the instance or a child of the UjoTable class.</li>
            <li>the small size of jWorkSheet application is interesting, it takes up about 170 kB including the UJO library.</li>
        </ul>
        The jWorkSheet project is written in Java 5.0, the development was realized by the <a href="http://www.netbeans.org/">NetBeans IDE</a>.

        <br>&nbsp;<br>
        <a href="http://pekiline.ponec.net/">PekiLine</a> - the desktop application manages your personal (English) vocabulary to learn.
        <ul>
            <li>the application can get an translation word from a <a href="http://www.google.com/dictionary">Google dictionary</a> including a pronunciation in case you are on-line</li>
            <li>you can modify all items of vocabulary, sort columns or mark word to a print</li>
            <li>personal data are stored in a XML file located in the user home subdirectory</li>
        </ul>


        <h2 id="where">Where ?</h2>
        The project home page: <a href="http://ujorm.org/">http://ujorm.org/</a><br>
        Referential implementation: <a href="http://jworksheet.ponec.net/">http://jworksheet.ponec.net/</a>.
        Another implementations: (here can be referenced your project).<br>

        <h2 id="license">License</h2>
        The code was released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.<br>
        <br>
        <div class="apache"><code>
   Copyright 2007-2014 Pavel Ponec

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
            </code>
        </div>




        <h2 id="faq">FAQ</h2>
        <ul>
            <li>Q: Is the list of the Keys objects ordered by a natural order?</li>
            <li>A: The result depends on the implementation. All keys are sorted by a <strong>property index</strong> by default.
                    All implementations from the Ujorm returns keys in a natural order on condition that the keys
                    where created by a factory method newKey(..). The <i>ArrayUjo</i> has assigned all indexes explicitly.
                    If the index numers have got the same value then the natural ordering is no guarantee by a Sun Microsystems specificaton.
            </li>

            <li>Q: What will be the retrieved UJO values, which were not initiated yet?</li>
            <li>A: The result depends on UJO object implementation. The default implementation (AbstractUjo) returns a default value from Key.
            </li>

            <li>Q: Are somewhere any other UJO usage?</li>
            <li>A: You find another examples in the jWorkSheet application and in the JUnit tests too.</li>


            <li>Q: Isn't the UJO work slow?</li>
            <li>A: Some implementations are very quick, see the chapter <a href="package.html#performance">Performance</a>.</li>
        </ul>
        See the <a href="http://ujorm.org/dokuwiki/">Wiki tutorial</a> for more information.

        <br>
        <h2 id="changes">Release notes</h2>
        <ul>
        <li>2012/10 - introduction the interface Key with the factory KeyFactory</li>
        <li>2011/10 - many small ORM improvements</li>
        <li>2010/10 - the production version 1.00 released</li>
        <li>2009/09 - the version 0.90 supports the ORM</li>
        <li>2008/09 - the version 0.80 brings an extended interface - UjoExt</li>
        <li>2007/10 - the first public version 0.70 is released under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a></li>
        </ul>
        See a detail <a href="../../changes.txt">release notes</a> in a text format for more information.
        <br>&nbsp;
        <br>
</body></html>
