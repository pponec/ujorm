# The Story of Ujorm Framework

*How much time can Ujorm Framewrok save and why was it created in the first place? The following article addresses more than these questions.*

Somewhere back in 2008, I had an opportunity to participate in development of an interesting transport reservations system written in Java. The frontend was built on [RichFaces](https://en.wikipedia.org/wiki/RichFaces), a former component framework for Sun Microsystems' [JavaServer Faces](https://en.wikipedia.org/wiki/JavaServer_Faces), ***obchodní logika*** was placed into service classes supported by [Spring](https://en.wikipedia.org/wiki/Spring_Framework) framework, persistent layer was built on [Hibernate](https://en.wikipedia.org/wiki/Hibernate_(framework)\) ORM framework.

An analysis done by an experienced analyst was done before the implementation, most of the development team consisted of developers with ages of experience in creating Java web applications. For the record, technologies mentioned above were relatively new for the team, but this risk factor was taken into account in the workload estimations. First reactions were positive, partially thanks to the neat look of JSF components with embedded AJAX support. As time went by though, the development started to slow down. Maintenance of the JSF components (based on XML files) was becoming more and more difficult, safe refactoring was impossible, their reuse for frontend was troublesome. Typos were piling up in the service layer methods references and Java compiler &ndash; by design &ndash; wasn't able to recognize them. In the last phase of the project, the number of working developers has nearly doubled against the previous expectations and yet it couldn't be finished in the expected in due time with the expected quality. Unfortunately, the trouble didn't stop there.

Usage on real data revealed unexpected operational issues. Time savings achieved by using Hibernate framework were gradually lost during bugfixing and performance optimization of queries, which worked just fine in JDBC. It's possible that our lack of experience with Hibernate framework has caused the issues to some degree, which is why I consider the long period of time it takes to learn the framework to be its major downside. In contrast, use of the Spring framework which handled mainly **dependency injection** and **database transactions** was smooth and issueless. The project was accepted by the customer in the end, but the bitterness from the development sticked with me and I realised that some things could work differently. This was the moment I began to write a framework, today known as [Ujorm](https://ujorm.org/).

Ujorm Framework is based on domain **key-value** type objects, where the keys used for writing values also serve as property-descriptors providing some services like their chaining. Such domain object's architecture on one hand presents a (relatively) new approach to creating certain algorithms, on the other hand engenders some controversy though. The initial public Ujorm version introduced XML files persistence, which was used by a [jWorkSheet](http://jworksheet.ponec.net/) desktop app for tracking time spent on projects. Later, an ORM module with dialects suppoting several database products was created. A module allowing integration of [Apache Wicket](https://en.wikipedia.org/wiki/Apache_Wicket) web framework was eventually made. In 2013, I've [published](http://www.jug.cz/article/demo-aplikace-pro-ujorm-a-wicket) a simple web app for virutal hotel reservations &ndash; aptly called [Demo Hotels](https://pponec.github.io/ujorm/www/sample/hotels-cz.html) &ndash; in order to present an intriguing use case scenario of objects implementating the [Ujo](http://ujorm.org/javadoc/org/ujorm/Ujo.html) interface. The project contains only one domain objects set for simplicity purposes, feel free to try it out [here](https://hotels.ujorm.org/).

After publishing this application, I got an apportuninty to rewrite the project for administration of real subcontractor's services. The project's architecture has changed, ***servisní*** services were moved to a designated server, communication was mediated via WS SOAP, an integration of third-party serices was commenced on the server, but the initial technology hasn't changed. Now here comes the most interesting part of the story: development of a module, which would take at a guess 3 months to create in JSF/JPA technology &ndash; took only **3 weeks**. Some may argue the 3 months estimate is way too pesimistic and I cannot exclude the possibility of someone else creating it faster. With that said, should someone wish to dispute the clear difference between those times, I encourage them to rewrite **Demo Hotels** to JSF (on XHTML templates) with JPA/Hibernate persistency and then compare the size of both projects' source code, my estimate is the **Demo Hotels** project will be a quarter of the latter. However, small source code's size doesn't have to be the only indicator of an efficient development, therefore I recommend renaming the **Hotel.name** entity's attribute and filling in new parameters that'd allow users to configure the number of lines on a page via GUI separately for every table. While errors in Demo Hotels after the editing can easily be spotted even by a junior programmer thanks to the compilator (in case IDE doesn't refactor it automatically), in the JSF/JPA scenario will the difficulty of such edits very much depend on programmer's experience.

## Conclusion
It seems that the approach of static constants use with generic types and methods for reading and writing values into a domain object was unique in its time. However, it's true that Ujorm can hardly compete with its competitors when it comes to range of services or documentation. This year will mark ten years of the first Ujorm Framework's ORM module release, since then it's been deployed on various production servers without major operational issues as far as I know. Mass deployment hasn't happened though.

## Web Links
- [Ujorm Homesite](https://ujorm.org/)
- [Ujorm Blog](https://ujorm-cs.blogspot.com/)
- [Description of key-value object use in Ujorm](http://ujorm.org/sample/key-value-cz.html)
- [Description](http://ujorm.org/sample/hotels-cz.html) of DemoHotels app ([source code](https://pponec.github.io/ujorm/www//downloads/DemoHotels-1.90.7z))
- [Ujorm on GitHub](https://github.com/pponec/ujorm)
- [Mockup of key-value API with POJO support](https://github.com/pponec/ujorm/blob/Ujorm2/README-ReleaseII-cs.md)