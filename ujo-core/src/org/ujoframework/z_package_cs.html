<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html lang="cs"><head>
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1250"><title>package.html - UJO (cz)</title>
        
        <link rel="stylesheet" type="text/css" href="style.css" title="style">
        <script type="text/javascript">
function loadCSS (cssUrl) {
var oLink = document.createElement("link")
oLink.href = cssUrl;
oLink.rel = "stylesheet";
oLink.type = "text/css";
document.body.appendChild(oLink);
        } </script>
    </head>
    
    <body style="background-color: white;">
        Návod pro pouití knihovny UJO Framework.<br>
        <br>
        <!-- [AddSense] -->
        <h2 id="UJO"><img style="width: 32px; height: 32px; margin-right: 10px;" alt="UJO Icons" src="ujo32.png">Obsah</h2>
          <ul>
              <li><a href="#UJO2">Co je UJO?</a></li>
              <li><a href="#why">Proè pouívat architekturu UJO?</a></li>
              <li><a href="#how">Jak napíšeme tøídu objektu UJO?</a></li>
              <li><a href="#xml">XML serializace</a></li>
              <li><a href="#javabean">Jak vytvoøit JavaBean?</a></li>
              <li><a href="#tablemodel">Podpora komponenty JTable</a></li>
              <li><a href="#how2">Jak na rozšíøení?</a></li>
              <li><a href="#performance">Vıkon</a></li>
              <li><a href="#how3">Jaké jsou další monosti vyuití?</a></li>
              <li><a href="#refAppl">Referenèní aplikace</a></li>
              <li><a href="#where">Domovská stránka projektu</a></li>
              <li><a href="#license">Licence</a></li>
              <li><a href="#faq">FAQ</a></li>
          </ul>           
        
        
        <h2 id="UJO2">Co je UJO ?</h2>
        
        <a href="UjoUmlFull.png" target="_top"><img src="UjoUml.png" width="284" height="320" alt="UjoUml.png" style="margin: 0 0 10px 10px; border: 0; float: right;" ></a>
        <span class="appl">UJO Framework</span> je Java knihovna, která poskytuje netradièní architekturu objektù
        odlišnıch od <a href="http://en.wikipedia.org/wiki/JavaBeans">JavaBeans</a>. Pùvodní nápad vznikl jako høíèka s generickımi datovımi typy Java 5.0, 
        postupem èasu se však ukázalo, e architektura má nìkolik zajímavıch vlastností. Souèasná verze frameworku nabízí:
        
        <ul>
        <li>otevøenı kód</li>
        <li>revoluèní architektura objektu postavená na dvou rozhraních, která zjednodušuje manipulaci objektù pomocí 
            <a href="http://java.sun.com/docs/books/tutorial/javabeans/">sestavovacího nástroje</a> aplikace
            pøi zachování vıborné rychlosti <!-- ve srovnání s pøístupem k atributùm pøes Java reflexi--></li>
        <li>vıkonná XML serializace</li>
        <li><a href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> serializace</li>
        <li><a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/PropertyResourceBundle.html">Resource bundle</a> serializace</li>
        <li>podpora komponenty <a href="http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/JTable.html">JTable</a></li>
        <li>objekt si øídí sám dostupnost svıch atributù</li>
        <li>property <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/beans/PropertyChangeListener.html">listener</a>
            je moné implementovat na jednom <a href="Ujo.html#writeValue(org.ujoframework.UjoProperty,%20java.lang.Object)">místì</a>
            pro všechny property tøídy vèetnì potomkù</li>
        <li>podpora <a href="http://en.wikipedia.org/wiki/JavaBeans">JavaBeans</a></li>
        <li>úspornı zdrojovı kód vašich UJO objektù</li>
        <li>kontrola unitovımi testy</li>
        <li>malá velikost frameworku bez dalších závislostí</li>
        </ul>        
            
        <span class="appl">UJO</span> je zkratka pro <span style="font-style: italic;">Unified
        Java Object</span> a oznaèuje takovı <a href="http://en.wikipedia.org/wiki/Object_%28computer_science%29">objekt</a>,
        kterı implementuje rozhraní <a href="Ujo.html">Ujo</a>.
        
        Objekt UJO si lze pøedstavit napøíklad jako <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html">mapu</a> (objekt mapující hodnoty ke klíèùm), 
        ke které se pøistupuje pomocí <strong>metod klíèe</strong>. Klíè je zde tvoøen implementací rozhraní <a href="UjoProperty.html">UjoProperty</a> 
        obsahující (mimo jiné) dvì typovì bezpeèné metody:
        <ul>
            <li><a href="UjoProperty.html#setValue(UJO,%20VALUE)">UjoProperty.setValue(Ujo, VALUE)</a> - pro zápis hodnoty do objektu a</li> 
            <li><a href="UjoProperty.html#getValue(UJO)">UjoProperty.getValue(Ujo)</a> - pro ètení hodnoty.</li>
        </ul>
        
        Na rozdíl od metod objektu JavaBean lze tyto klíèe posílat jednoduše dalším objektùm, 
        pøíkladem vyuití mùe bıt seznam zobrazovanıch sloupcù tabulky poslanı do datového modelu typu TableModel, 
        nebo odkazy k metodám beanu na JSP stránce.
        
        Jádrem projektu jsou tedy dvì rozhraní 
        <a href="Ujo.html" style="font-style: italic;">Ujo</a> a 
        <a href="UjoProperty.html" style="font-style: italic;">UjoProperty</a>,
        ke kterım jsou k dispozici tøi abstraktní implementace:
           <ul>
               <li><a href="implementation/map/MapUjo.html">MapUjo</a> - snadná implementace pro vıvojáøe s dostateènım vıkonem pro bìné aplikace postavená na objektu <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html">HashMap</a></li>
               <li><a href="implementation/array/ArrayUjo.html">ArrayUjo</a> - špièkovı vıkon objektù je srovnatelnı s rychlostí zápisu do JavaBeans, je implementovanı pomocí <strong>pole objektù</strong></li>
               <li><a href="implementation/bean/BeanUjo.html">BeanUjo</a> - tato implementace mapuje klíèe pøímo na metody objektu <a href="http://en.wikipedia.org/wiki/JavaBeans">JavaBean</a> pomocí <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/Method.html">Java reflexe</a></li>
           </ul>
        
        Inspirací pro rozvoj tohoto projektu byla architektura perzistentních objektù v projektu <a href="http://cayenne.apache.org/">Cayenne</a> (nástroj pro øešení 
        <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">ORM</a>)
        <br />
        
        
        <h2 id="why">Proè ?</h2>
        Proè pouívat architekturu <strong>UJO</strong>?
        Objekty <strong>UJO</strong> nabízí
        nìkolik zajímavıch vlastností, které je odlišují od tradièních <strong>JavaBeans</strong> objektù:<br>
        <ul>
            <li>snadná <strong>serializace</strong>
                objektù do formátù XML <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/PropertyResourceBundle.html"><i>PropertyResourceBundle</i></a>
                a <a href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a>.</li>
            <li>architektura objektù je obecnì vhodná pro strojové zpracování atributù
                objektu. Pøíkladem vyuití mùe bıt <strong> generická</strong>
            implementace metod <i>equals()</i>, <i>hash()</i> a øady dalších..</li>
            <li>architektura umoòuje vytvoøit odkaz
                na atribut UJO
                (nikoli jejich hodnot) a celı seznam atributù lze pøedat do nìjaké
                metody - napøíklad ve formátu  <a href="UjoProperty.html">UjoProperty[]</a>.
            Tuto vlastnost lze vyuít napøíklad pro definici sloupcù tabulky, èi pro oznaèení sloupcù pro øazení seznamu UJO objektù.</li>
            <li>defaultní implementace UJO objektù jsou souèástí projektu.</li>
            <li>framework obsahuje pøipravenou implementaci UjoTableModel pro <strong>Swing</strong>. Pro jednoduchou vizualizaci UJO
            objektù není tøeba implementovat rozhraní <a href="http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/table/TableModel.html">TableModel</a>.</li>
            <li>architektura je vhodná pro stavbu <strong>dynamickıch objektù</strong>
            za bìhu aplikace (zatím není implementováno)</li>
            <li>knihovna je velice malá (zabírá kolem 65kB) a je nezávislá na
                knihovnách tøetích stran. Tuto vlastnost lze
            zhodnotit napøíklad v menších aplikacích spustitelnıch <strong>Java Web Start</strong>.</li>
            <li>pokud oelíme nìkteré typové kontroly je moné framework
            pøepsat do verze Java SE 1.4.</li>
            <li>èetnost vyuití metod Java reflexe je minimální a v pøípadì potøeby je moné napsat vlastní implementaci UJO objektù bez reflexe.</li>
            <li>pro zápis jednoho atributu postaèuje <strong>jedinı øádek zdrojového kódu</strong>, JavaBeans potøebují (pøi standardním zápisu) øádkù 7 (1 field + 3 øádky setter + 3 getter).
            <li>krátká doba uèení, jádro projektu tvoøí pouze <strong>dva základní typy rozhraní</strong> (Interface), dále
            jejich implementace a tøídu <strong>UjoManager</strong>, která poskytuje UJO objektùm sluby (nejen perzistentní ).</li>
            <li>funkce frameworku je pravidelnì kontrolována øadou JUnitovıch testù.</li>
        </ul>
        Objekt typu <strong>JavaBean</strong> oèekává implementaci
        metody <i>equals() </i>pro kadou tøídu a implementace jsou zpravidla
        rùzné pro rùzné tøídy. Na rozdíl od toho objekt UJO umoòuje implementaci této metody
        pouze v rodièovské tøídì.  Pokud z nìjakého dùvodu není
        moné vytvoøit spoleèného rodièe, metodu <i>equals()</i> lze implementovat
        jedním programovım øádkem spoleènım pro
        všechny tøídy. Pøíklad implementace je uveden dále.
        <ul>
        </ul>
        Objekty UJO jsou otevøené pro implementaci
        dalších vlastností a v pøípadì potøeby lze
        implementovat vlastnosti typu  <strong>JavaBean</strong>,
        <strong>Serizalizable</strong>
        atd.
        Protoe implementace byla postavena na Java™ 5.0, tak i pøíklady v dokumentu jsou demonstrovány na této verzi jazyka Java.  
        S urèitım omezením (ztráta typové kontroly) je však moné UJO implementovat v niších verzích jazyka Java.<br>
        <br>
        <h2 id="how">Jak ?</h2>
        Jak napíšeme tøídu objektu UJO?
        Nejrychlejší cesta je vyuít nìjakou abstraktní implementaci UJO z tohoto projektu, pomocí pár øádù kódu však mùeme
        vyrobit snadno i svoji vlastní implementaci. Pøíkladem nech
        je implementace tøídy <i>Person</i> pomocí abstraktní tøídy <a href="#Changes">MapUjo</a>.
        
        <h3>Kód tøídy</h3>
        Jednoduché vzorové vytvoøení tøídy Person je zde:
<pre class="pre"><span class="java-keywords">import</span> org.ujoframework.implementation.map.*;
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> MapUjo {<br> 
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Person,String &gt; NAME = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">"Name"</span>, String.<span class="java-keywords">class</span>);
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Person,Boolean&gt; MALE = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">"Male"</span>, Boolean.<span class="java-keywords">class</span>);
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Person,Double &gt; CASH = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">"Cash"</span>, Double.<span class="java-keywords">class</span>);<br> 
}</pre>
        Teï, kdy máme hotovou tøídu Person mùeme vytvoøit její instanci a zapsat èi naèíst nìjaká data. Pro
        zápis atributù objektu lze vyuít jednu ze dvou metod API:<i><br>
        </i>
        <ol>
            <li><i>Person.<strong>writeValue</strong>(UjoProperty, Object)</i>,
            nebo </li>
            <li><i>UjoProperty.<strong>setValue</strong>(person,
            Object)</i>. </li>
        </ol>
        Z pohledu vısledku jsou obì metody ekvivalentní, nicménì druhé
        øešení poskytuje <b>typovou kontrolu</b> pøi zápisu i ètení hodnoty.
        Ukázka pouití druhého (2) pøístupu je zde:
<pre class="pre"><span class="java-keywords">import static</span> org.Person.*;
Person person = <span class="java-keywords">new</span> <span class="java-layer-method">Person</span>();<br>
<span class="java-block-comment">// Writing:</span>
NAME.<span class="java-layer-method">setValue</span>(person, <span class="java-string-literal">"Paul Ponec"</span>);
MALE.<span class="java-layer-method">setValue</span>(person, <span class="java-keywords">true</span>);
CASH.<span class="java-layer-method">setValue</span>(person, <span class="java-numeric-literals">34.5</span>);<br>
<span class="java-block-comment">// Reading:</span>
String  name = NAME.<span class="java-layer-method">of</span>(person); <span class="java-block-comment">// method of() is an alias for MapProperty.getValue()</span>
<span class="java-keywords">boolean</span> male = MALE.<span class="java-layer-method">of</span>(person);
<span class="java-keywords">double</span>  cash = CASH.<span class="java-layer-method">of</span>(person);
<br></pre>

     Od <strong>verze 0.80</strong> je moné pouít <strong>rozšíøené API</strong> které nabízí èitelnìjší kód pro pøístup a attributùm 
     a umoòuje mimo jiné i øetìzení properties podobnì jako v jazyku <a href="http://en.wikipedia.org/wiki/Groovy_%28programming_language%29">Groovy</a>. Nové API jen rozšiøuje to pùvodní a tak 
     je moné kombinovat oba typy objektù.
     
<pre class="pre"><span class="java-keywords">import static</span> org.Person.*;
Person person = <span class="java-keywords">new</span> <span class="java-layer-method">Person</span>(); <span class="java-block-comment">// An extension of MapUjoExt</span><br>
<span class="java-block-comment">// Writing:</span>
person.<span class="java-layer-method">set</span>(NAME, <span class="java-string-literal">"Paul Ponec"</span>);
person.<span class="java-layer-method">set</span>(MALE, <span class="java-keywords">true</span>);
person.<span class="java-layer-method">set</span>(CASH, <span class="java-numeric-literals">34.5</span>);<br>
<span class="java-block-comment">// Reading:</span>
String  name = person.<span class="java-layer-method">get</span>(NAME);
<span class="java-keywords">boolean</span> male = person.<span class="java-layer-method">get</span>(MALE);
<span class="java-keywords">double</span>  cash = person.<span class="java-layer-method">get</span>(CASH);
<br></pre>
     

        <strong>Poznámka: </strong><br>
        Pokud pouíváte kompilaèní parametr <strong>-Xlint:unchecked</strong>,
        kompilátor vás obèas upozorní na chybìjící deklarace <strong>Generickıch datovıch typù</strong>
        pøi inicializaci MapProperty. Máte tøi monosti:<br>
        <ul>
            <li>generické datové typy doplòovat i na pravou stranu vırazu podle vzoru levé èásti vırazu, nebo</li>
            <li>parametr <strong>-Xlint:unchecked</strong> pøi kompilaci nezapínat</li>
            <li>tøídu oznaèit anotací <i>@SuppressWarnings("unchecked")</i>.
                <br />Osobnì jsem zvolil tuto monost, kód se zprùhlední 
                a pøípadné kolize na stejném øádku je moné snadno uhlídat.</li>
            <li>od verze 0.72 je pro tvorbu Property implementovaná typovì bezpeèná metoda <strong>newProperty(name, type)</strong></li>
        </ul>
        <h3>Implementace metody equals()</h3>
        Naše tøída <i>Person</i> má funkci <i>equals()</i> u implementovanou, protoe ji zdìdila z rodièovské tøídy <i>MapUjo</i>.
        Pokud však z nìjakého dùvodu chcete napsat vlastní implementaci UJO s touto metodou, staèí do tøídy zapsat kód:<br>
<pre class="pre"><span class="java-keywords">public</span> <span class="java-keywords">boolean</span> <span class="java-layer-method">equals</span>(Object obj) {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">equals</span>(<span class="java-keywords">this</span>, (Ujo) obj );
}<span class="java-block-comment"></span>
</pre>
        <h3>Implementace metody clone()</h3>
        Podobnì jak v pøípadì metody equals mùete vytvoøit implementaci metody <i>clone()</i>:<br>
<pre class="pre"><span class="java-block-comment"></span><span class="java-block-comment"></span><span class="java-keywords">public</span> Object <span class="java-layer-method">clone</span>() {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">clone</span>(<span class="java-keywords">this</span>, 1, <span class="java-keywords">null</span>);
}
</pre>
        <h3>Implementace metody hash()</h3>
        Podobnı pøíklad implementace metody <span style="font-style: italic;">hash()</span>
        :<br>
<pre class="pre"><span class="java-block-comment"></span><span class="java-block-comment"></span><span class="java-keywords">public</span> <span class="java-keywords">int</span> <span class="java-layer-method">hash</span>() {
  <span class="java-keywords"></span><span class="java-keywords">return</span> UjoManager.<span class="java-layer-method">getInstanceManager</span>().<span class="java-layer-method">getHash</span>(<span class="java-keywords">this</span>);
}
</pre>
        Všechny uvedené implementace jsou zpravidla vhodné i pro všechny potomky Ujo objektù.<br>
        <h2 id="xml">XML serializace</h2>
        Pouití serializace je velice jednoduché, kód vypadá takto:<br>
<pre class="pre"> Person person;
...<br>
<span class="java-block-comment">// Make Serialization:</span>
UjoManagerXML.<span class="java-layer-method">getInstance</span>().<span class="java-layer-method">saveXML</span>(writer, person, <span class="java-keywords">null</span>, <span class="java-string-literal">"My Export"</span>);<br>
<span class="java-block-comment">// Make Deserialization:</span>
person = UjoManagerXML.<span class="java-layer-method">getInstance</span>().<span class="java-layer-method">parseXML</span>(inputStream, Person.<span class="java-keywords">class</span>, <span class="java-string-literal">"My Import"</span>);<br>
</pre>

        Obsah vytvoøeného XML vypadá takto:
<pre class="pre"><span class="xml-pi-start">&lt;?</span><span class="xml-pi-start">xml</span> <span class="xml-pi-content">version="1.0" encoding="UTF-8"</span><span class="xml-pi-start">?&gt;</span>
<span class="xml-tag">&lt;body</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;Name</span><span class="xml-tag">&gt;</span>Paul Ponec<span class="xml-tag">&lt;/Name</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;Male</span><span class="xml-tag">&gt;</span>true<span class="xml-tag">&lt;/Male</span><span class="xml-tag">&gt;</span>
  <span class="xml-tag">&lt;Cash</span><span class="xml-tag">&gt;</span>34.5<span class="xml-tag">&lt;/Cash</span><span class="xml-tag">&gt;</span>
<span class="xml-tag">&lt;/body</span><span class="xml-tag">&gt;</span>
</pre>


<h3>List Property</h3>
Èasto se hodí, aby nìjakı atribut obsahoval <strong>seznam</strong> dalších UJO objektù. Je sice moné vytvoøit 
atribut typu <strong>ArrayList&lt;UjoItem&gt;</strong>, nicménì vhodnìjší je pouít pro atribut tøídu <a href="#">UjoPropertyList</a>. Prvním z dùvodù je èistší obsah exportu do XML, 
protoe export neobsahuje informace o <strong>datovıch typech</strong> poloek Listu. 
Pro podrobnìjší informaci doporuèuji prostudovat API.
<br>&nbsp;<br>
Doporuèené øešení pro implementaci vazby <strong>1:N</strong> pro objekty Person - Child.
<pre class="pre">
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> MapUjo { 
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty    &lt;Person,String&gt; NAME  = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">&quot;Name&quot;</span>, String.<span class="java-keywords">class</span>);
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapPropertyList&lt;Person,Child&gt; CHILDS = <span class="java-layer-method">newPropertyList</span>(<span class="java-string-literal">&quot;Child&quot;</span>, Child.<span class="java-keywords">class</span>);
}
</pre>

        <h3 id="xmlAuthrization">Zákaz exportu</h3>
        Co kdy je tøeba exportovat jen nìkteré atributy UJO objektu a jiné ignorovat?
        <br>Pro tento pøípad slouí metoda <strong>readAuthorization(...)</strong>, která mùe povolit úèast vybranıch atributù v závislosti na:
        <ul>
        <li>typu akce (XML export, Resource Bundle export, ...)</li>
        <li>atributu</li>
        <li>jeho hodnotì</li>
        <li>a pøípadnì i na kontextu celé akce</li>
        </ul>
        Na následujícím pøípadì si ukáeme, jak vypadá potlaèení atributu <strong>NAME</strong> pøi exportu do XML:
<pre class="pre">
<span class="java-keywords">public</span> <span class="java-keywords">boolean</span> <span class="java-layer-method">readAuthorization</span>(<span class="java-keywords">int</span> action, UjoProperty property, Object value, Object context) {
  <span class="java-keywords">switch</span>(action) {
    <span class="java-keywords">case</span> ACTION_XML_EXPORT: 
      <span class="java-keywords">return</span> property!=NAME;
    <span class="java-keywords">default</span>: {
      <span class="java-keywords">return</span> <span class="java-keywords">super</span>.<span class="java-layer-method">readAuthorization</span>(action, property, value, context);
    }
  }
}</pre>        
        Poznámka: protoe všechny vlastnosti (Properties) UJO objektu jsou typu final, není tøeba je porovnávat metodou <strong>equals()</strong>, 
        ale je moné pouít rychlejší porovnání operátorem <strong>==</strong>.
        
<h3>Zápis XML atributu</h3>
UJO Framework nabízí monost ukládat vybrané <strong>property</strong> jako atribut na místo XML elementu (defaultní vlastnost). K dosaení cíle vedou dvì cesty:
<ul>
  <li>implementovat vlastní øešení metody <strong>readAuthorization(...)</strong>. 
      Pro rozlišení se vyuívá autorizaèní test pro akci ACTION_XML_ELEMENT, návratová hodnota FALSE je zpráva pro zápis XML atributu. Pøíklad pouití, ve kterém se property NAME zapisuje jako XML atribut:
<pre class="pre"><span class="java-annotation">@</span>Override
<span class="java-keywords">public</span> <span class="java-keywords">boolean</span> <span class="java-layer-method">readAuthorization</span>(<span class="java-keywords">int</span> action, UjoProperty property, Object value, Object context) {
  <span class="java-keywords">switch</span>(action) {
    <span class="java-keywords">case</span> ACTION_XML_ELEMENT: <span class="java-keywords">return</span> property!=NAME; // the NAME will be an attribute of an element
    <span class="java-keywords">default</span>: <span class="java-keywords">return</span> <span class="java-keywords">super</span>.<span class="java-layer-method">readAuthorization</span>(action, property, value, context);
  }
}
</pre>
  </li>
  <li>pokud pouiváte nìkterého abstraktního rodièe (MapUjo, ArrayUjo), je moné oznaèit property pøímo anotací <strong>@XmlAttribute</strong> podle vzoru:
<pre class="pre"><span class="java-annotation">@</span>XmlAttribute
<span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Ujo,String&gt; NAME = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">"Name"</span>, String.<span class="java-keywords">class</span>);
</pre>
      Vıchozí implementace metody <strong>readAuthorization(...)</strong> v rodièovské tøídì rozpoznává pøiøazenou anotaci 
      a tak mechanismus stále funguje vıše popsanım zpùsobem.
  </li>
</ul>

        

        <h2 id="javabean">Jak vytvoøit JavaBean?</h2>
        Z UJO objektu snadno vyrobíte JavaBean, staèí implementovat setter a getter pro kadı atribut. Pøíklad pouití:
<pre class="pre">
<span class="java-keywords">import</span> org.ujoframework.implementation.map.*;
<span class="java-keywords">public</span> <span class="java-keywords">class</span> Person <span class="java-keywords">extends</span> MapUjo {<br>
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Person,String&gt;  NAME = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">&quot;Name&quot;</span>, String.<span class="java-keywords">class</span>);
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;Person,Double&gt; CASH = <span class="java-layer-method">newProperty</span>(<span class="java-string-literal">&quot;Cash&quot;</span>, Double.<span class="java-keywords">class</span>);<br>    
  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">setName</span>(String name) {
    NAME.<span class="java-layer-method">setValue</span>(<span class="java-keywords">this</span>, name);
  }
  <span class="java-keywords">public</span> String <span class="java-layer-method">getName</span>() {
    <span class="java-keywords">return</span> <span class="java-layer-method">NAME</span>.getValue(<span class="java-keywords">this</span>);
  }
  <span class="java-keywords">public</span> <span class="java-keywords">void</span> <span class="java-layer-method">setCash</span>(<span class="java-layer-method">Integer</span> cash) {
    CASH.<span class="java-layer-method">setValue</span>(<span class="java-keywords">this</span>, cash);
  }
  <span class="java-keywords">public</span> <span class="java-layer-method">Integer</span> <span class="java-layer-method">getCash</span>() {
    <span class="java-keywords">return</span> CASH.<span class="java-layer-method">getValue</span>(<span class="java-keywords">this</span>);
  }
}</pre>

Od verze Ujo Framework 0.74 je pro snadnou implementaci UJO do objektù JavaBeans pøipravena tøída <a href="implementation/bean/BeanUjo.html">BeanUjo</a>.
           
        <h2 id="tablemodel">Podpora komponenty JTable</h2>
        UJO Framework obsahuje podporu pro zobrazování seznamu (List) UJO objektù v tabulce JTable.
        Pro vytvoøení jednoduché editovatelné tabulky není tøeba vytváøet ádnou novou tøídu, staèí pouze <strong>vytvoøit instanci tøídy</strong> <a href="swing/UjoTableModel.html">UjoTableModel</a> 
        a tu pak vloit do objektu JTable metodou setModel().
        Pøíklad jednoduchého pouití následuje:
<pre class="pre">
<span class="java-block-comment">// Create a model for all attributes:</span>
UjoTableModel&lt;Person&gt; model = <span class="java-keywords">new</span> <span class="java-layer-method">UjoTableModel</span>(Person.NAME, Person.MALE, Person.BIRTH);
<span class="java-block-comment">// or simply: ... model = new UjoTableModel(Person.class)</span>
jTable.<span class="java-layer-method">setModel</span>(model);<br>
<span class="java-block-comment">// We can set an data optionaly:</span>
List&lt;Person&gt; persons = <span class="java-keywords">new</span> <span class="java-layer-method">ArrayList</span>();
model.<span class="java-layer-method">setRows</span>(persons);<br>
</pre>        
        
        <br />Další monosti tøídy UjoTableModel:
        <pre class="pre">
<span class="java-block-comment">// Add a row:</span>
model.<span class="java-layer-method">addRow</span>(<span class="java-keywords">new</span> <span class="java-layer-method">Person</span>());<br>
<span class="java-block-comment">// Set a value:</span>
model.<span class="java-layer-method">setValueAt</span>(<span class="java-string-literal">"Prokop"</span>, <span class="java-numeric-literals">0</span>, Person.NAME );<br>
<span class="java-block-comment">// Get a last row of table:</span>
Person person = model.<span class="java-layer-method">getRowLast</span>();<br>
<span class="java-block-comment">//</span><span class="java-block-comment"> Sort the model:</span>
model.<span class="java-layer-method">sort</span>(<span class="java-keywords">true</span>, Person.NAME);<br>
</pre>
    
        <h3>Srovnání s AbstractTableModel</h3>
        Pro vytvoøení datového modelu <strong>editovatelné</strong> tabulky je tøeba implementovat èi pøepsat (overwrite) 
        nìkolik metod abstraktní tøídy AbstractTableModel.
        <br>
        <ul style="color: rgb(192, 192, 192);">
            <li>getColumnName(int column)</li>
            <li>getColumnClass(int column)</li>
            <li>getColumnCount()</li>
            <li>getRowCount()</li>
            <li>getValueAt(int rowIndex, int columnIndex)</li>
            <li>setValueAt(Object value, int rowIndex, int columnIndex)</li>
        </ul>
        
        Všechny tyto metody ve tøídì UjoTableModel dostanete u implementované.
        Jméno sloupce a odpovídající tøída se berou z pøímo objektu UjoProperty, seznam sloupcù se vkládá v konstruktoru.
        
        
        <h2 id="how2">Jak na rozšíøení?</h2>
        Pokud potøebujete vyrobit potomka tøídy Person, staèí v potomkovi
        definovat pouze nové atributy. Pøi prvním volání metody
        readProperties() se seznam <span style="font-style: italic;">UjoProperty[]</span>
        získá pomocí Java reflexe, všechny ostatní hodnoty se u berou z cache.<br>
<pre class="pre"><span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">class</span> PersonExt <span class="java-keywords">extends</span> Person {<br>
  <span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;PersonExt,Float&gt; WEIGHT = <span class="java-keywords">new</span> <span class="java-layer-method">MapProperty</span>(<span class="java-string-literal">"Weight"</span>, Float.<span class="java-keywords">class</span>);
  <span class="java-keywords"></span><span class="java-keywords">public</span> <span class="java-keywords">static</span> <span class="java-keywords">final</span> MapProperty&lt;PersonExt,Date&gt;  BORN   = <span class="java-keywords">new</span> <span class="java-layer-method">MapProperty</span>(<span class="java-string-literal">"Born"</span>  , Date.<span class="java-keywords">class</span>);<br>
}</pre>
        
        
        <h2 id="performance">Vıkon</h2>
        Rychlost zpracování UJO objektù je závislá na implementaci. Pøi
        zpracování objektu typu <span style="font-style: italic;">MapUjo</span>
        je rychlost  (zápis/ètení) pøiblinì shodná s operacemi zápis/ètení objektu HashMap. Rychlejší implementaci poskytuje
        øešení ArrayUjo, nejrychlejší je objekt JavaBean.<br>
        <br>
        Vısledky jednoduchého mìøení jsou uvedeny v následující tabulce.
        <br />Prostøedí Windows XP, procesor Intel DuoCore 1.66 MHz, JRE 1.6.0_04, UJO Framework 0.74 .<br>
        Popis testu: <br>
        <ul>
            <li>poèet iterací testu je 5 milionù </li>
            <li>v kadé iteraci se vytvoøí nová instance UJO objektu, </li>
            <li>zapíšou se hodnoty 10-ti  atributù, </li>
            <li>všechny hodnoty se pøeètou, </li>
            <li>objekt se uvolní pro Garbage collector a</li>
            <li>zveøejnìné vısledky jsou aritmetickım prùmìrem hodnot ze ètyø pokusù</li>
        </ul>
        <br>
        <table style="text-align: left;" border="1" cellpadding="2" cellspacing="0">
            <tr valign="top">
                <th style="text-align: left;">Implementace</th>
                <th style="text-align: right;">Rychlost<br /><span style="font-weight: normal;">[sec / za 5M cyklù]</span></th>
                <th style="text-align: right; width: 100px;">Pomìr<br /><span style="font-weight: normal;">[%]</span></td>
            </tr>
            <tr>
                <td align="left">ArrayUjo</td>
                <td align="right">2,000</td>
                <td align="right">183</td>
            </tr>
            <tr>
                <td align="left">MapUjo</td>
                <td align="right">7,032</td>
                <td align="right">643</td>
            </tr>
            <tr>
                <td align="left">BeanUjo</td>
                <td align="right">20,250</td>
                <td align="right">1851</td>
            </tr>
            <tr style="font-style: italic; color: #9999FF;">
                <td align="left">JavaBean</td>
                <td align="right">1,094</td>
                <td align="right">100</td>
            </tr>
        </table>
        
        <br>Z tabulky je zøejmé, e rychlost implementace <i>ArrayUjo</i> a blíí se rychlosti JavaBeans objektù.
        Vısledky mùe ovlivnit v nìkterıch pøípadech reie spojená s vytváøením instancí hodnoty atributù.
        Rychlost pøístupu JavaBeans se však vıraznì sníí v pøípadì, e objektùm JavaBeans budeme pøistupovat 
        pøes nástroje <strong>Java</strong> reflexe, hodnoty pak budou odpovídat èasu <i>BeanUjo</i>.
        
        <p><strong>Serializace UJO objektù</strong> z XML je postavena na rychlém SAX parseru, rychlostní testy jsou velice pøíznivé
           zejména ve srovnání s rychlostí XML serializace (XMLEncoder, XMLDecoder) implementované v JRE.
        </p>
        Mìøení bylo provedeno za stejnıch podmínek jako minulı test (UJO verze 0.74), vısledky jsou opìt v tabulce.<br>
        Popis testu: <br>
        <ul>
            <li>všechny business objekty jsou stejného typu (v rámci jednoho testu)</li>
            <li>kadı business objekt obsahuje 11 atributù vèetnì jednoho rekurzivního typu ArrayList</li>
            <li>celkovı poèet instancí business objektu 6000</li>
            <li>maximální hloubka zanoøení 4 levels</li>
            <li>test byl proveden tøídou XmlSpeedTest2 (druhı prùchod) ze skupiny JUnit testù</li>
            <li>zveøejnìné vısledky jsou aritmetickım prùmìrem hodnot ze ètyø pokusù</li>
        </ul>
        <br>
        <table style="text-align: left;" border="1" cellpadding="2" cellspacing="0">
             <tr valign="top">
                <th style="text-align: left;">Implementace</th>
                <th style="text-align: right;">Rychlost serializace<br /><span style="font-weight: normal;">[sec]</span></th>
                <th style="text-align: right;">Rychlost deserializace<br /><span style="font-weight: normal;">[sec]</span></th>
                <th style="text-align: right;">Pomìr celkem<br /><span style="font-weight: normal;">[%]</span></th>
            </tr>
            <tr>
                <td align="left">ArrayUjo</td>
                <td align="right">0,343</td>
                <td align="right">0,500</td>
                <td align="right">18,5</td>
            </tr>
            <tr>
                <td align="left">MapUjo</td>
                <td align="right">0,344</td>
                <td align="right">0,531</td>
                <td align="right">19,2</td>
            </tr>
            <tr>
                <td align="left">BeanUjo</td>
                <td align="right">0,383</td>
                <td align="right">0,516</td>
                <td align="right">19,7</td>
            </tr>
            <tr style="font-style: italic; color: #9999FF;">
                <td align="left">JavaBean</td>
                <td align="right">3,832</td>
                <td align="right">1,726</td>
                <td align="right">100,0</td>
            </tr>
            <tr style="font-style: italic; color: #9999FF;">
                <td align="left">JAXB 2.1</td>
                <td align="right">0,203</td>
                <td align="right">0,484</td>
                <td align="right">15,1</td>
            </tr>
        </table>
        
        <br />Závìr: XML perzistence implementovaná v UJO Frameworku je více ne <strong>pìtkrát rychlejší</strong> ve srovnání s XML perzistencí implementovanou v JRE 6.0.
        Vısledky také napovídají, e rychlost zápisu UJO objektù je ve srovnání ostatními úkoly serializace málo vıznamná.
        
        
        
        <h2 id="how3">Jak?</h2>
        Jaké jsou další monosti vyuití ?<br>
        
        <h3>Perzistence</h3>
        <ul>
            <li>Celou hierarchii UJO objektù lze uloit ve formátu XML pomocí tøídy UjoManagerXML. Pro další informaci viz tøídu UjoXml .</li>
            <li>UJO objekt lze ukládat ve formátu <a href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/PropertyResourceBundle.html"><span style="font-style: italic;">PropertyResourceBundle</span></a>.</li>
            <li>UJO objekt bude moné v nìkteré další verzi ukládat ve formátu CSV.</li>
            <li>Pouití UJO objektù ve frameworku <a href="http://cayenne.apache.org/">Cayenne</a> (nástroj
                pro øešení <a href="http://pt.wikipedia.org/wiki/ORM">ORM</a>).
                Cayenne pracuje s perzistentními tøídami podobnì, jako implementace <i>MapUjo</i>. Protoe
                perzistentní objekty se tvoøí pomocí šablony, lze šablonu snadno upravit tak, aby implementovala rozhraní <strong>Ujo</strong>.</li>
        </ul>
        <h3>Servlet</h3>
        Vyuití UJO v servletech zatím není podrobnì popsáné, nicménì základní myšlenka pro zpracování textovıch parametrù objektu ServletRequest je asi tato:<br>
<pre class="pre">ServletRequest request;
UjoTextable person;
UjoProperty personName;
...
person.<span class="java-layer-method">writeValueString</span>(<span class="java-layer-method"></span>personName, request.<span class="java-layer-method">getParameters</span>(personName.<span class="java-layer-method">getName</span>());
</pre>

        <br>
        <h2 id="refAppl">Referenèní aplikace</h2>
        Referenèní implementací je Swingovı projekt <a href="http://jworksheet.ponec.net/"><strong>jWorkSheet</strong></a>, kterı vytvoøil autor UJO Frameworku a kterı je zveøejnìn  pod
        otevøenou licencí na domovské stránce <a href="http://jworksheet.ponec.net/">http://jworksheet.ponec.net/</a>.
        Aplikace <strong>jWorkSheet</strong> slouí k mìøení vašeho èasu stráveného na projektech. 
        <br> Na zdrojovıch kódech lze studovat vyuití perzistence UJO objektù
        stejnì tak jako snadné propojení kolekce UJO objektù s grafickou komponentou JTable.
        <br>
        <br>
        Vlastnosti aplikace jWorkSheet:<br>
        <ul>
            <li>veškerá persistence je realizovaná pomocí frameworku UJO. V projektu se pouívá ukládání do formátu <strong>XML</strong>, parametry se
            ukládají do formátu <strong>Resource Bundle</strong>.</li>
            <li>všechny datové modely objektu JTable jsou buï pøímo instancí, nebo potomkem UjoTable .</li>
            <li>zajímavá je malá velikost aplikace jWorkSheet, zabírá pøiblinì 170 kB vèetnì knihovny UJO.</li>
        </ul>
        Projekt JWorkSheet je napsanı v Java 5.0, vıvoj byl realizován v <a href="http://www.netbeans.org/">NetBeans IDE</a> .
        
        <h2 id="where">Kde?</h2>
        Domovská stránka projektu: <a href="http://ujoframework.org/">http://ujoframework.org/</a><br>
        Referenèní implementace: <a href="http://jworksheet.ponec.net/">http://jworksheet.ponec.net/</a>.
        <br>Další implementnace: (zde mùe bıt odkaz i na váš projekt).<br>
        
        
        <h2 id="license">Licence</h2>
        Kód byl uvolnìn pod licencí <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>. <br>
        <br>
        <div class="apache"><code>
   Copyright 2007 Pavel Ponec

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
            </code>
        </div>
        
        
        
        
        <h2 id="faq">FAQ</h2>
        <ul>
            <li>Q: Seznam objektù Properties je seøazenı?</li>
            <ul><li>A: Záleí to na implementaci.
                    Tøída ArrayUjo vrací seznam seøazenı vdy. 
                    Tøída MapUjo vrací Properties zpravidla v poøadí ve kterém jsou zapsány ve zdrojovém kódu.
                    Protoe však metoda Java reflexe toto poøadí negarantuje, tak v pøípadì, 
                    e je chybné poøadí properties mùe bıt kritické je doporuèeno nìjaké øešení na principu ArrayUjo.
            </li></ul>
            
            <li>Q: Jakı bude vısledek pøi ètení hodnot UJO, které nebyly dosud iniciované? </li>
            <ul><li>A: vısledek je závislı na implementaci UJO objektu</li>
                <li>B: Vıchozí implementaci (SuperUjo) vrací defaultní hodnotu z UjoProperty.</li>
            </ul>
            
            <li>Q: Je moné nìjak vyèistit Properties cache?</li>
            <ul><li>A: Ano, metodou ve tøídì UjoManager.</li>
            </ul>
            
            <li>Q: Jak lokalizovat názvy properties?</li>
            <ul><li>A: Názvy properties lze pouít jako klíè pro vyledání v objektu typu <span style="font-style: italic;">java.util.ResourceBundle</span></li>
            </ul>
            
            <li>Q: Jsou nìkde další pøíklady pouití UJO?</li>
            <ul><li>A: Další pøíklady najdete kromì aplikace JWorkSheet i v JUnitovıch testech UJO Frameworku.</li>
            </ul>
            
            <li>Q: Není zpracování UJO pomalé?</li>
            <ul><li>A: Implementace je velice rychlá, viz kapitola <a href="package.html#performance">Vıkon</a>.</li>
            </ul>
        </ul>
        
        <!--
    <h2 id="bestPractises">Dotace</h2>
    Pokud se vám projekt líbí, mùete ho podpoøit na úèet: ... TODO.<br>
    -->
        <br>
        <h2 id="changes">Seznam zmìn</h2>
        <ul>
        <li>2008/06 - Verze 0.80 pøichází s rozhraním UjoExt</li>
        <li>2007/10 - První veøejná verze 0.70 je uvolnìna pod licencí <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</li>
        </ul>
        Podrobìjœí informace jsou ve <a href="../../changes.txt">zmìnovém listu</a>, kterı je dostuplnı v textovém formátu.
        <br>&nbsp;
        <br>
</body></html>