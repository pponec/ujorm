

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html class="pageview">


<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<base target="_top">
<style type="text/css">
  

/* default css */

table {
  font-size: 1em;
  line-height: inherit;
  border-collapse: collapse;
}


tr {
  
  text-align: left;
  
}


div, address, ol, ul, li, option, select {
  margin-top: 0px;
  margin-bottom: 0px;
}

p {
  margin: 0px;
}


pre {
  font-family: Courier New;
  white-space: pre-wrap;
  margin:0;
}

body {
  margin: 6px;
  padding: 0px;
  font-family: Verdana, sans-serif;
  font-size: 10pt;
  background-color: #ffffff;
  color: #000;
}


img {
  -moz-force-broken-image-icon: 1;
}

@media screen {
  html.pageview {
    background-color: #f3f3f3 !important;
    overflow-x: hidden;
    overflow-y: scroll;
  }

  

  body {
    min-height: 1100px;
    
    counter-reset: __goog_page__;
  }
  
  * html body {
    height: 1100px;
  }
  /* Prevent repaint errors when scrolling in Safari. This "Star-7" css hack
     targets Safari 3.1, but not WebKit nightlies and presumably Safari 4.
     That's OK because this bug is fixed in WebKit nightlies/Safari 4 :-). */
  html*#wys_frame::before {
    content: '\A0';
    position: fixed;
    overflow: hidden;
    width: 0;
    height: 0;
    top: 0;
    left: 0;
  }
  
  .pageview body {
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
    border-right: 2px solid #bbb;
    border-bottom: 2px solid #bbb;
    width: 648px !important;
    margin: 15px auto 25px;
    padding: 40px 50px;
  }
  /* IE6 */
  * html {
    overflow-y: scroll;
  }
  * html.pageview body {
    overflow-x: auto;
  }
  

  
    
    .writely-callout-data {
      display: none;
    }
    

    .writely-footnote-marker {
      background-image: url('MISSING');
      background-color: transparent;
      background-repeat: no-repeat;
      width: 7px;
      overflow: hidden;
      height: 16px;
      vertical-align: top;

      
      -moz-user-select: none;
    }
    .editor .writely-footnote-marker {
      cursor: move;
    }
    .writely-footnote-marker-highlight {
      background-position: -15px 0;
      -moz-user-select: text;
    }
    .writely-footnote-hide-selection ::-moz-selection, .writely-footnote-hide-selection::-moz-selection {
      background: transparent;
    }
    .writely-footnote-hide-selection ::selection, .writely-footnote-hide-selection::selection {
      background: transparent;
    }
    .writely-footnote-hide-selection {
      cursor: move;
    }

    /* Comments */
    .writely-comment-yellow {
      background-color: #ffffd7;
    }
    .writely-comment-orange {
      background-color: #ffe3c0;
    }
    .writely-comment-pink {
      background-color: #ffd7ff;
    }
    .writely-comment-green {
      background-color: #d7ffd7;
    }
    .writely-comment-blue {
      background-color: #d7ffff;
    }
    .writely-comment-purple {
      background-color: #eed7ff;
    }

  


  
  .br_fix span+br:not(:-moz-last-node) {
    
    position:relative;
    
    left: -1ex
    
  }

  
  #cb-p-tgt {
    font-size: 8pt;
    padding: .4em;
    background-color: #ddd;
    color: #333;
  }
  #cb-p-tgt-can {
    text-decoration: underline;
    color: #36c;
    font-weight: bold;
    margin-left: 2em;
  }
  #cb-p-tgt .spin {
    width: 16px;
    height: 16px;
    background: url(//ssl.gstatic.com/docs/clipboard/spin_16o.gif) no-repeat;
  }
}

h6 { font-size: 8pt }
h5 { font-size: 8pt }
h4 { font-size: 10pt }
h3 { font-size: 12pt }
h2 { font-size: 14pt }
h1 { font-size: 18pt }

blockquote {padding: 10px; border: 1px #DDD dashed }

.webkit-indent-blockquote { border: none; }

a img {border: 0}

.pb {
  border-width: 0;
  page-break-after: always;
  /* We don't want this to be resizeable, so enforce a width and height
     using !important */
  height: 1px !important;
  width: 100% !important;
}

.editor .pb {
  border-top: 1px dashed #C0C0C0;
  border-bottom: 1px dashed #C0C0C0;
}

div.google_header, div.google_footer {
  position: relative;
  margin-top: 1em;
  margin-bottom: 1em;
}


/* Table of contents */
.editor div.writely-toc {
  background-color: #f3f3f3;
  border: 1px solid #ccc;
}
.writely-toc > ol {
  padding-left: 3em;
  font-weight: bold;
}
ol.writely-toc-subheading {
  padding-left: 1em;
  font-weight: normal;
}
/* IE6 only */
* html writely-toc ol {
  list-style-position: inside;
}
.writely-toc-none {
  list-style-type: none;
}
.writely-toc-decimal {
  list-style-type: decimal;
}
.writely-toc-upper-alpha {
  list-style-type: upper-alpha;
}
.writely-toc-lower-alpha {
  list-style-type: lower-alpha;
}
.writely-toc-upper-roman {
  list-style-type: upper-roman;
}
.writely-toc-lower-roman {
  list-style-type: lower-roman;
}
.writely-toc-disc {
  list-style-type: disc;
}

/* Ordered lists converted to numbered lists can preserve ordered types, and
   vice versa. This is confusing, so disallow it */
ul[type="i"], ul[type="I"], ul[type="1"], ul[type="a"], ul[type="A"] {
  list-style-type: disc;
}

ol[type="disc"], ol[type="circle"], ol[type="square"] {
  list-style-type: decimal;
}

/* end default css */


  /* default print css */
  @media print {
    body {
      padding: 0;
      margin: 0;
    }

    div.google_header, div.google_footer {
      display: block;
      min-height: 0;
      border: none;
    }

    div.google_header {
      flow: static(header);
    }

    /* used to insert page numbers */
    div.google_header::before, div.google_footer::before {
      position: absolute;
      top: 0;
    }

    div.google_footer {
      flow: static(footer);
    }

    /* always consider this element at the start of the doc */
    div#google_footer {
      flow: static(footer, start);
    }

    span.google_pagenumber {
      content: counter(page);
    }

    span.google_pagecount {
      content: counter(pages);
    }

    .endnotes {
      page: endnote;
    }

    /* MLA specifies that endnotes title should be 1" margin from the top of the page. */
    @page endnote {
      margin-top: 1in;
    }

    callout.google_footnote {
      
      display: prince-footnote;
      footnote-style-position: inside;
      /* These styles keep the footnote from taking on the style of the text
         surrounding the footnote marker. They can be overridden in the
         document CSS. */
      color: #000;
      font-family: Verdana;
      font-size: 10.0pt;
      font-weight: normal;
    }

    /* Table of contents */
    #WritelyTableOfContents a::after {
      content: leader('.') target-counter(attr(href), page);
    }

    #WritelyTableOfContents a {
      text-decoration: none;
      color: black;
    }

    /* Comments */
    .writely-comment-yellow {
      background-color: #ffffd7;
    }
    .writely-comment-orange {
      background-color: #ffe3c0;
    }
    .writely-comment-pink {
      background-color: #ffd7ff;
    }
    .writely-comment-green {
      background-color: #d7ffd7;
    }
    .writely-comment-blue {
      background-color: #d7ffff;
    }
    .writely-comment-purple {
      background-color: #eed7ff;
    }
  }

  @page {
    @top {
      content: flow(header);
    }
    @bottom {
      content: flow(footer);
    }
    @footnotes {
      border-top: solid black thin;
      padding-top: 8pt;
    }
  }
  /* end default print css */


/* custom css */


/* end custom css */

/* ui edited css */

body {
  font-family: Verdana;
  
  font-size: 10.0pt;
  line-height: normal;
  background-color: #ffffff;
}
/* end ui edited css */


/* editor CSS */
.editor a:visited {color: #551A8B}
.editor table.zeroBorder {border: 1px dotted gray}
.editor table.zeroBorder td {border: 1px dotted gray}
.editor table.zeroBorder th {border: 1px dotted gray}


.editor div.google_header, .editor div.google_footer {
  border: 2px #DDDDDD dashed;
  position: static;
  width: 100%;
  min-height: 2em;
}

.editor .misspell {background-color: yellow}

.editor .writely-comment {
  font-size: 9pt;
  line-height: 1.4;
  padding: 1px;
  border: 1px dashed #C0C0C0
}


/* end editor CSS */

</style>

  
  <title>Ujorm tutorial - EN</title>

</head>

<body 
    
    >
    
    
    
<h1>
  <a id=Ujorm_User_Guide_1070508786431_7503301269390328 name=Ujorm_User_Guide_1070508786431_7503301269390328></a><font color=#674ea7>Ujorm User Guide</font><img height=65 id=syq1 src="images/ddcs2pg5_136gwrcjzf3_b.png" style=FLOAT:right;MARGIN-LEFT:40pt;MARGIN-RIGHT:1em width=65>
</h1>
<i>Document License: <a href=http://creativecommons.org/licenses/by-nd/3.0/ rel=license title="Creative Commons BY-ND">Creative Commons BY-ND</a> ,<br>
Author: Pavel Ponec, ponec@ujorm.com<br>
</i>
<div style=MARGIN-LEFT:40px>
  <i>&nbsp;&nbsp; Spring Integration by Tomas Hampl</i><br>
</div>
<i>Version: Ujorm 1.10 (February, 2011)<br>
PDF format:</i> <a href=http://ujoframework.org/orm/tutorial/UjormUserGuide-1.10.pdf title=Print><img src="images/ddcs2pg5_190djqbwxd2_b.png" style=HEIGHT:16px;WIDTH:16px></a><i><br>
Thank you for your comments or suggestions.</i><br>
<br>
<br>
<div class=writely-toc id=WritelyTableOfContents toctype=decimal+decimal>
  <ol class=writely-toc-decimal>
    <li>
      <a href=#Ujorm_User_Guide_1070508786431_7503301269390328 target=_self>Ujorm User Guide</a>
    </li>
    <ol class="writely-toc-decimal writely-toc-subheading" style=MARGIN-LEFT:0pt>
      <li>
        <a href=#Prologue_32509538153101136_077_35819016178271557 target=_self>Prologue</a>
      </li>
      <li>
        <a href=#Quick_Start_024257222361389164_1841035884585368 target=_self>Quick Start</a>
      </li>
      <li>
        <a href=#Architecture_924643946159931_7_7040076682486025 target=_self>Architecture</a>
      </li>
      <li>
        <a href=#Example_of_application_the_cod_7285772419008745 target=_self>Example of application the code</a>
      </li>
      <li>
        <a href=#Persistent_domain_objects_2015 target=_self>Persistent domain objects</a>
      </li>
      <li>
        <a href=#Comment_by_annotations_3525065 target=_self>Comment by annotations</a>
      </li>
      <li>
        <a href=#How_to_use_the_Criterion_33739 target=_self>How to use the Criterion?</a>
      </li>
      <li>
        <a href=#Native_Criterion target=_self>Native Criterion</a>
      </li>
      <li>
        <a href=#Native_Ujorm_query_3626118237620981 target=_self>Native Query</a>
      </li>
      <li>
        <a href=#States_of_persistent_object_83_9213545305730154 target=_self>States of persistent object</a>
      </li>
      <li>
        <a href=#Mapping_of_data_types_84852531 target=_self>Mapping of data types</a>
      </li>
      <li>
        <a href=#Lazy_loading_7739415085933957__12776824148876254 target=_self>Lazy loading</a>
      </li>
      <li>
        <a href=#Session_cache_2924390070129026_3856413959334468 target=_self>Session cache</a>
      </li>
      <li>
        <a href=#DDL_support_9552100910462308_3_1376557173157592 target=_self>DDL support</a>
      </li>
      <li>
        <a href=#Entity_inheritance_45555076325 target=_self>Entity inheritance</a>
      </li>
      <li>
        <a href=#Primary_key_auto_increment_933 target=_self>Primary key auto increment</a>
      </li>
      <li>
        <a href=#Database_procedures_2677129503 target=_self>Database procedures</a>
      </li>
      <li>
        <a href=#Transaction_control_0930804139_6528190389441351 target=_self>Transaction control</a>
      </li>
      <li>
        <a href=#API_extention_3988491735460056_473356603837205 target=_self>API extension</a>
      </li>
      <li>
        <a href=#Supported_databases_2606746893_6155699934696457 target=_self>Supported databases</a>
      </li>
      <li>
        <a href=#Why_UjoProperty_constants_have_1720420499458618 target=_self>Why UjoProperty constants have lowercase letters?</a>
      </li>
      <li>
        <a href=#Use_of_UJO_objects_95477417165 target=_self>Using of UJO objects</a>
      </li>
      <li>
        <a href=#Best_Practices_787200236848682 target=_self>Best Practices</a>
      </li>
      <li>
        <a href=#Meta_Model_4256673146749511_32_6450549354135522 target=_self>Meta-Model</a>
      </li>
      <li>
        <a href=#Integrating_Spring_Framework_1 target=_self>Integrating Spring Framework</a>
      </li>
      <li>
        <a href=#Performance_6233224483458395_1_4940767214421822 target=_self>Performance</a>
      </li>
      <li>
        <a href=#More_information_0795528381750 target=_self>More information</a>
      </li>
      <li>
        <a href=#References_9305696342416853_22_6503170924344536 target=_self>References</a>
      </li>
      <li>
        <a href=#Acknowledgements_7557169868300 target=_self>Acknowledgements</a>
      </li>
    </ol>
  </ol>
</div>
<br>
<div class="placeholder text title" id=ul_3>
  <div class=inner-text id=qbku>
    <div dir=ltr>
      <div dir=ltr>
        <br>
        <h2>
          <a id=Prologue_32509538153101136_077_35819016178271557 name=Prologue_32509538153101136_077_35819016178271557></a>Prologue
        </h2>
        <a href=http://ujorm.com/ title=Ujorm>Ujorm</a>&nbsp;is an easy-to-use ORM framework designed for rapid Java development based on a relation database. The framework is carefully designed for the <b>effective</b> development with great performance and a small footprint. The key features are:<br>
      </div>
    </div>
  </div>
</div>
<br>
<ul>
  <li>
    type-safe queries to a relation database<br>
  </li>
  <li>
    building of queries are independent on a target database<br>
  </li>
  <li>
    relation mapping by the Java code by default, however the<br>
  </li>
  <li>
    database mapping can be overwritten by annotations or a XML file<br>
  </li>
  <li>
    internal cache with a protection against overload storage<br>
  </li>
  <li>
    no entity states
  </li>
  <li>
    incremental database update using DDL statements
  </li>
  <li>
    lazy initialization is supported
  </li>
  <li>
    simple and reliable implementation solution
  </li>
  <li>
    integration support for the Spring Framework&nbsp;
  </li>
</ul>
<br>
The main vision is:<br>
<br>
<ul>
  <li>
    50% developer time saving for a persistent layer and<br>
  </li>
  <li>
    great performance compared with competitors
  </li>
  <li>
    simple rules to use<br>
  </li>
  <li>
    lightweight ORM framework
  </li>
  <li>
    open-source for free use include a commercial one<br>
  </li>
</ul>
<br>
<br>
<h2>
  <a id=Quick_Start_024257222361389164_1841035884585368 name=Quick_Start_024257222361389164_1841035884585368></a>Quick Start
</h2>
There is recommended to read first of all this <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/ujorm/src/main/java/org/SampleORM.java?view=markup title=tutorial>class tutorial</a> based on an annotated source code for <span class=short_text id=d41o><span class=hps title="Kliknutím zobrazíte alternativní překlady">quick</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">introduction</span></span>. In the tutorial you can found entities from following class diagram:<br>
<div style=MARGIN-LEFT:40px;TEXT-ALIGN:left>
  <br>
</div>
<div style=TEXT-ALIGN:center>
  <div id=qnxx style=TEXT-ALIGN:center>
    <img height=225 src="images/ddcs2pg5_175fw3mw8gr_b.png" width=444>
  </div>
</div>
<i>Note: UjoProperties are in diagrams formally described using the attributes of entity.</i><br>
<br>
Because the Ujorm connected from Maven repository (repo1) is compiled without debugging information, I suggest to you to join the Ujorm JavaDoc to your project, so that you get full names of method parameters and more useful information from API.<br>
<br>
When you use the Maven POM file, take the following dependency:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 id=m9h- style=MARGIN-LEFT:auto;MARGIN-RIGHT:auto;TEXT-ALIGN:left>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">&nbsp; &lt;dependency&gt;</font><br clear=none style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;</font><b style="FONT-FAMILY:Courier New">org.ujoframework</b><font face="courier new">&lt;/groupId&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font><br clear=none style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;</font><b style="FONT-FAMILY:Courier New">ujo-orm</b><font face="courier new">&lt;/artifactId&gt;</font><br clear=none style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;</font><b style="FONT-FAMILY:Courier New">1.10</b><font face="courier new">&lt;/version&gt;</font><br clear=none style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp; &lt;/dependency&gt;</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
<h2>
  <a id=Architecture_924643946159931_7_7040076682486025 name=Architecture_924643946159931_7_7040076682486025></a>Architecture
</h2>
The next class diagram clarifies relation between Ujorm framework classes and application domain classes. The diagram is simplified and slightly modified to show only the relevant entities. A more detailed descriptions can be found, if necessary, in the <a href=http://ujoframework.org/javadoc/ id=e3-s title="JavaDoc Project">Ujorm JavaDoc</a> .<br>
<div id=le08 style=TEXT-ALIGN:left>
  <div id=saxt style=TEXT-ALIGN:left>
    <br>
    <div id=p-sj style=TEXT-ALIGN:left>
      <div id=kvbb style=TEXT-ALIGN:center>
        <div id=yn7u style=TEXT-ALIGN:center>
          <img height=568 src="images/ddcs2pg5_180frd98khh_b.png" width=543>
        </div>
        <br>
      </div>
      <div style=TEXT-ALIGN:center>
        <br>
      </div>
    </div>
  </div>
</div>
Notes to graph:<br>
<a href=http://ujoframework.org/javadoc/org/ujoframework/UjoProperty.html id=si4c title=UjoProperty>UjoProperty</a> attributes described in the domain objects are always <b>immutable static constants,</b> which provide methods for writing and reading values to (from) the Ujo object. Only this diagram is hinted for better illustration the implementation of UjoProperties in domain objects, in other diagrams of this document is used the same formal registration as for a regular POJO attributes.<br>
<br>
Entity Description:<br>
<ul>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/Ujo.html id=xqd8 title=Ujo>Ujo</a> - interface of an object containing the values. The object provides a list of their properties. A kind of data storage determines the implementation, for example OrmTable uses internally an array of objects.<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/UjoProperty.html id=w.:k title=UjoProperty>UjoProperty</a> - immutable object containing meta-data of the property, which provides two methods for reading and writing values to Ujo object. Two related UjoProperties could be joined using the method add(), the result is stored in a new immutable instance of the UjoProperty interface.
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/extensions/Property.html id=je:b title=Property>Property</a> - the default implementation of UjoProperty<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/implementation/orm/RelationToMany.html id=mbhx title=RelationToMany>RelationToMany</a> - extended default implementation of UjoProperty designed for the data type: UjoIterator&lt;item&gt;<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/OrmUjo.html id=aijk title=OrmUjo>OrmUjo</a> - an interface designed for persistent application domain objects. Each object contains the session and provides a list of modified properties, more information are available later in this document<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/implementation/orm/OrmTable.html id=cxp6 title=OrmTable>OrmTable</a> - default implementation of OrmUjo interface<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/OrmHandler.html id=c1tj title=OrmHandler>OrmHandler</a> - owner of the meta-model, which provides an efficient methods to search for specific parts of the meta-model. Meta-model is locked after initialization and can't be changed later.<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html id=mra2 title=Criterion>Criterion</a> - the fundamental condition for the evaluation database Query. Criterion objects can be joined into a binary tree by operators <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html#and%28org.ujoframework.criterion.Criterion%29 id=qghe title="and ()">and()</a> and <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html#or%28org.ujoframework.criterion.Criterion%29 id=zrqu title="or ()">or()</a> .<br>
  </li>
  <li>
    Database - the class form an application package containing a description of the persistent domain classes and stored procedures. For different DB connections, you can define multiple classes type of Database<br>
  </li>
  <li>
    User, Order, Item - example of using application domain objects, Please notice that in object can be used RelatinToMany property like in class Database. This RelatinToMany always returns UjoIterator as a result of a new database query.
  </li>
</ul>
<br>
<h2>
  <a id=Example_of_application_the_cod_7285772419008745 name=Example_of_application_the_cod_7285772419008745></a>Example of the application code
</h2>
The following code example obtains instances of <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/OrmHandler.html id=ev92 title=OrmHandler>OrmHandler</a> class and its configuration using the Database class, the instance is retained for. It creates an instance of Order class Items and stores in a database. The <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/Session.html#save%28org.ujoframework.orm.OrmUjo%29 id=hkp7 title=save()>save()</a> and <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/Session.html#commit%28%29 id=tort title=commit()>commit()</a> operations can throw an run-time exception so there is necessary to catch the exception and close the used <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/Session.html id=c1jz title=Session>Session</a>.<br>
<br>
<div style=MARGIN-LEFT:40px>
  <table border=1 cellpadding=3 cellspacing=0 height=360 id=azp2 width=396>
    <tbody>
    <tr>
      <td width=100%>
        <font face="courier new" size=2><font size=2>&nbsp;OrmHandler</font><span class=pygments-n> handler</span> <span class=pygments-o>=</span> <b><span class=pygments-k><font color=#741b47>new</font></span> </b><span class=pygments-n>OrmHandler</span><span class=pygments-o>();</span>&nbsp;<br>
        &nbsp;handler.<span class=pygments-na>loadDatabase</span><span class=pygments-o>(</span><span class=pygments-n>Database</span><span class=pygments-o>.</span><b style=COLOR:#741b47><span class=pygments-na>class</span></b><span class=pygments-o>);</span><br>
        <br>
        &nbsp;Order order = </font><font color=#741b47 face="courier new" size=2><b>new</b> </font><font face="courier new" size=2>Order();<br>
        &nbsp;order.setDate(</font><b><font color=#741b47 face="courier new" size=2>new </font></b><font face="courier new" size=2>Date());<br>
        &nbsp;order.setDescr("John's order");<br>
        <br>
        &nbsp;Item item1 = </font><font color=#741b47 face="courier new" size=2>new </font><font face="courier new" size=2>Item();<br>
        &nbsp;item1.setOrder(order);<br>
        &nbsp;item1.setDescr(</font><b><font color=#0b5394 face="courier new" size=2>"Yellow table"</font></b><font face="courier new" size=2>);<br>
        <br>
        &nbsp;Item item2 = </font><font color=#741b47 face="courier new" size=2>new </font><font face="courier new" size=2>Item();<br>
        &nbsp;item2.setOrder(order);<br>
        &nbsp;item2.setDescr(</font><b><font color=#0b5394 face="courier new" size=2>"Green window"</font></b><font face="courier new" size=2>);<br>
        <br>
        &nbsp;Session session =&nbsp;<font face="courier new" size=2><span class=pygments-n>handler</span></font>.createSession(); &nbsp;<br>
        &nbsp;session.save(order); &nbsp;<br>
        &nbsp;session.save(item1); &nbsp;<br>
        &nbsp;session.save(item2); &nbsp;<br>
        <br>
        &nbsp;session.commit(); &nbsp;<br>
        &nbsp;session.close();</font><br>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<br>
<br>
The second example contains usage a query using the <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html id=pcyw title=Criterion>Criterion</a> joined by two elementary conditions. Missing operator is replaced by the EQUALS' one. Notice how is created composite 'UjoProperty'. The composite 'property' can be stored as an additional static constants of domain object. Prepared query is contained in the 'Query' object a can be simply used in 'for-each' command. In the end we have to close database 'session' again. More information about the Criterion use can be found <a href=#How_to_use_the_Criterion_33739 id=ofxo target=_self title=later>later</a> in this document.<br>
<div style=MARGIN-LEFT:40px>
  <br>
</div>
<div style=MARGIN-LEFT:40px>
  <table border=1 cellpadding=3 cellspacing=0 id=g8j1>
    <tbody>
    <tr>
      <td width=100%>
        &nbsp; <font face="courier new">Criterion&lt;Item&gt; cn1, cn2, criterion; &nbsp;</font><br style="FONT-FAMILY:Courier New">
        &nbsp; &nbsp;<br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;cn1 = Criterion.where( Item.ID, Operator.GE, </font><b><font color=#0b5394 face="courier new">1L</font></b><font face="courier new"> ); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;cn2 = Criterion.where( Item.ORDER.add(Order.DESCR) &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; , </font><b><font color=#0b5394 face="courier new">"John's order"</font></b><font face="courier new"> ); <font color=#cccccc>// Equals to</font> &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;criterion = cn1.and(cn2); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;Session session = handler</font><font face="courier new">.createSession(); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;Query&lt;Item&gt; items = session.createQuery(criterion); </font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;<font face="courier new">items</font>.orderBy( Item.ORDER.add(Order.CREATED)</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; , Item.ID.descending() ); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;System.out.println(</font><font color=#0b5394 face="courier new"> <b>"Row count: "</b></font><font face="courier new"> + items.getCount());</font>&nbsp;&nbsp;&nbsp;<br style="FONT-FAMILY:Courier New">
        <br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;for (Item item : items) { &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; String descr = item.getDescr(); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; Date created = item.getOrder().getDate(); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; System.out.println( created + </font><b><font color=#0b5394 face="courier new">" : "</font></b><font face="courier new"> + descr ); &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;} &nbsp;</font><br style="FONT-FAMILY:Courier New">
        <font face="courier new">&nbsp;session.close();</font><br>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<br>
This Java code executes a database SQL statement <b>similar </b>to this:<br>
<div style=MARGIN-LEFT:40px>
  <br>
</div>
<div style=MARGIN-LEFT:40px>
  <table border=1 cellpadding=3 cellspacing=0 id=ply8>
    <tbody>
    <tr>
      <td width=100%>
        &nbsp; <font face="courier new">SELECT * FROM item<br>
        &nbsp;LEFT INNER JOIN order ON order.id = item.fk_order&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
        &nbsp;WHERE item.id &gt;=1<br>
        &nbsp;&nbsp; AND order.descr = '<b><font color=#0b5394 face="courier new">John\'s order</font></b>'<br>
        </font>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<br>
<br>
where both parameters are passed by a 'question mark' notation for a high security.<br>
In the last example is used information from meta-model, which may contain useful information such as validation of the object.<br>
<div style=MARGIN-LEFT:80px>
  <br>
</div>
<table border=1 cellpadding=3 cellspacing=0 height=192 id=e8tr style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">MetaColumn col = (MetaColumn) &nbsp;</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handler.findColumnModel(Order.DESCR); &nbsp;</font><br style="FONT-FAMILY:Courier New">
      &nbsp;<br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;StringBuilder msg = new StringBuilder() &nbsp;</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; .append(</font><b><font color=#0b5394 face="courier new">"Length : "</font></b><font face="courier new"> + col.getMaxLength() + </font><b><font color=#0b5394 face="courier new">'\n'</font></b><font face="courier new">)<br>
      </font><font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; .append(</font><b><font color=#0b5394 face="courier new">"NotNull: "</font></b><font face="courier new"> + col.isMandatory()&nbsp; + </font><b><font color=#0b5394 face="courier new">'\n'</font></b><font face="courier new">)<br>
      </font><font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; .append(</font><b><font color=#0b5394 face="courier new">"PrimKey: "</font></b><font face="courier new"> + col.isPrimaryKey() + </font><b><font color=#0b5394 face="courier new">'\n'</font></b><font face="courier new">)<br>
      </font><font face="courier new"><font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; .append(</font><b><font color=#0b5394 face="courier new">"DB name: "</font></b><font face="courier new"> + col.getFullName()&nbsp; + </font><b><font color=#0b5394 face="courier new">'\n'</font></b><font face="courier new">)<br>
      </font>&nbsp;&nbsp;&nbsp;&nbsp; .append(</font><b><font color=#0b5394 face="courier new">"Comment: "</font></b><font face="courier new"> + col.getComment() &nbsp; + </font><b><font color=#0b5394 face="courier new">'\n'</font></b><font face="courier new">)<br>
      </font><font face="courier new">&nbsp;&nbsp;&nbsp;&nbsp; ;&nbsp; </font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;System.out.println(msg);</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
<h2>
  <a id=Persistent_domain_objects_2015 name=Persistent_domain_objects_2015></a>Persistent domain objects
</h2>
Ujorm framework can use to persistence any object which implements the OrmUjo interface.<br>
<span class=hps title="Kliknutím zobrazíte alternativní překlady">However the easiest</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">way is </span>to create a child from the abstract class <span class=hps title="Kliknutím zobrazíte alternativní překlady">OrmTable</span>:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=63 id=hqog style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      public class <b style=COLOR:#351c75>Order </b>extends OrmTable&lt;Order&gt; {<br>
      <br>
      &nbsp;&nbsp;&nbsp; @Column(pk = true)<br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, Long&gt; id<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = newProperty(Long.<b style=COLOR:#741b47>class</b>);<br>
      <br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, Date&gt; created<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = newProperty(Date.<b style=COLOR:#741b47>class</b>);<br>
      <br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, User&gt; user<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = newProperty(User.<b style=COLOR:#741b47>class</b>);<br>
      <br>
      <i style=COLOR:#999999>&nbsp;&nbsp;&nbsp; /** Reference to the Order Items */</i><br>
      &nbsp;&nbsp;&nbsp; public static final RelationToMany&lt;Order, Item&gt; items<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = newRelation(Item.<b style=COLOR:#741b47>class</b>);<br>
      }<br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
The <b>primary key</b> is marked by parameter <b>pk</b> of the annotation <b>Column</b>, a database column name is derived from UjoProperty field name by default. That is all, isn't it easy?<br>
<br>
OK, for better comfort for developers we can optionally add getters and setters, however it is important to know that the framework doesn't need the methods:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=63 id=gizf style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      public class <b style=COLOR:#351c75>Order </b>extends OrmTable&lt;Order&gt; {<br>
      <br>
      <i style=COLOR:#999999>&nbsp;&nbsp;&nbsp; [ The UjoProperty initializations ]</i><br>
      <br>
      &nbsp;&nbsp;&nbsp; public Long getId() {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color=#741b47>return </font></b>get(id);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; public <b><font color=#741b47>void </font></b>setId(Long _id) {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set(id, _id);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; public Date getCreated() {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color=#741b47>return </font></b>get(created);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; public <b><font color=#741b47>void </font></b>setCreated(Date _created) {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set(created, _created);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; public User getUser() {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color=#741b47>return </font></b>get(user);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; public <b><font color=#741b47>void </font></b>setUser(User _user) {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set(user, _user);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp; <i style=COLOR:#999999>/** Only getter is allowed for the UjoIterlator */</i><br>
      &nbsp;&nbsp;&nbsp; public UjoIterator&lt;Item&gt; getItems() {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b><font color=#741b47>return </font></b>get(items);<br>
      &nbsp;&nbsp;&nbsp; }<br>
      }<br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
Note, that the relation to the Items can't have got the setter. A new Items can be assigned by the method Session.save(...) to database only.<br>
<br>
<h2>
  <a id=Comment_by_annotations_3525065 name=Comment_by_annotations_3525065></a>Comment by annotations
</h2>
Since Ujorm release 1.10 is allowed to describe persistent objects or its properties by special annotation called <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/annot/Comment.html id=j1_t title=Comment.>Comment.</a><br>
In case that a DDL auto-update is enabled than Ujorm write the text to relation database meta-model loading time, if the feature is supported<br>
<br>
The assigned policy can be affected by parameter <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/metaModel/MetaParams.html#COMMENT_POLICY id=zxtw title=COMMENT_POLICY>COMMENT_POLICY</a> with options:<br>
<ul>
  <li>
    ON_ANY_CHANGE - Assign all available comments from annotations to database on a new database object event,exactly on new table, column or index. It is a <b>default </b>option.
  </li>
  <li>
    FOR_NEW_OBJECT Assign the comment for a new table only
  </li>
  <li>
    NEVER No comments are assigned
  </li>
  <li>
    ALWAYS - Write all available comments from annotations to database on each meta-model loading event.
  </li>
</ul>
<br>
Sample of the use:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=63 id=r.rw style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <b style=COLOR:#741b47>@Comment</b>("<font color=#351c75>Order table is a head of the 'order items</font>")<br>
      public class <b style=COLOR:#351c75>Order </b>extends OrmTable&lt;Order&gt; {<br>
      <br>
      &nbsp;&nbsp;&nbsp; <b><font color=#741b47>@Comment</font></b>("<font color=#351c75>The Primary Key</font>")<br>
      &nbsp;&nbsp;&nbsp; @Column(pk = true)<br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, Long&gt; id ...<br>
      <br>
      &nbsp;&nbsp;&nbsp; <b><font color=#741b47>@Comment</font></b>("<font color=#351c75>Date of insert</font>")<br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, Date&gt; created ...<br>
      <br>
      &nbsp;&nbsp;&nbsp; <b><font color=#741b47>@Comment</font></b>("<font color=#351c75>Key to related user</font>")<br>
      &nbsp;&nbsp;&nbsp; public static final UjoProperty&lt;Order, User&gt; user ...<br>
      <br>
      }<br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
<h2>
  <a id=How_to_use_the_Criterion_33739 name=How_to_use_the_Criterion_33739></a>How to use the Criterion?
</h2>
The <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html id=qbvw title=Criterion>Criterion</a> is a base element to restrict a database <b>query</b>, however criterions have got one next <span class=hps title="Kliknutím zobrazíte alternativní překlady">feature</span>: they can <span class=hps title="Kliknutím zobrazíte alternativní překlady">be</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">used</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">immediately for the</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">evaluation of</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">an object -</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">as a</span> <b><span class=hps title="Kliknutím zobrazíte alternativní překlady">validator</span></b>.<br>
Each Criterion can be built to the binary tree by to operators: <b>and</b>(), <b>or</b>().<br>
<br>
For example let's create an instance of the Order entity:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=63 id=ihzw style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">final Order order = <b style=COLOR:#741b47>new </b>Order();</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">order.setId(<b style=COLOR:#0b5394>100L</b>);</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">order.setDescr("<b style=COLOR:#0b5394>my order</b>");</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">order.setDate(new Date());</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
and three different instances of the Criterion class:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=63 id=gv1k style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">Criterion&lt;Order&gt; crnId<br>
      &nbsp;&nbsp; = Criterion.where(Order.id, <font face="courier new">Operator.GT</font><b style=COLOR:#0b5394>, 99L</b>);</font><br>
      <br style="FONT-FAMILY:Courier New">
      <font face="courier new">Criterion&lt;Order&gt; crnDescr<br>
      &nbsp;&nbsp; = Criterion.where(Order.descr, "<b style=COLOR:#0b5394>another</b>");</font><br>
      <br style="FONT-FAMILY:Courier New">
      <font face="courier new">Criterion&lt;Order&gt; crnCreated<br>
      &nbsp;&nbsp; = Criterion.where(Order.created<br>
      &nbsp;&nbsp; , Operator.LE<br>
      &nbsp;&nbsp; , <b style=COLOR:#741b47>new </b>Date());</font><br>
      <br style="FONT-FAMILY:Courier New">
      <font face="courier new">Criterion&lt;Order&gt; crn = <b style=COLOR:#741b47>null</b>;</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
See the samples where the <b><font face="courier new">assert </font></b>statement have got a true result always.<br>
Simple condition: <b style=COLOR:#999999><i><font face="courier new"><br>
Order.id&gt;99</font></i></b><br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=39 id=l6xa style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new"><b style=COLOR:#741b47>assert </b>crnId.evaluate(order);</font><br style="FONT-FAMILY:Courier New">
    </td>
  </tr>
  </tbody>
</table>
<br>
Compound condition: <b style=COLOR:#999999><i><font face="courier new"><br>
Order.id&gt;99 or Order.descr='another'</font></i></b><br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=46 id=x7fr style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">crn = crnId.or(crnDescr);</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new"><b style=COLOR:#741b47>assert </b>crn.evaluate(order);</font><br style="FONT-FAMILY:Courier New">
    </td>
  </tr>
  </tbody>
</table>
<br>
Compound condition with parentheses: <b style=COLOR:#999999><font face="courier new"><br>
Order.created&lt;=now() and (Order.descr='another' or <font face="courier new">Order</font><font face="courier new">.</font>id&gt;99)</font></b><br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=48 id=o8xm style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">crn = crnCreated.and(crnDescr.or(crnId));</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new"><b style=COLOR:#741b47>assert </b>crn.evaluate(order);</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
Another condition: <i><b style=COLOR:#999999><font face="courier new"><br>
Order.created&lt;=now() or Order.descr='another') and <font face="courier new">Order.</font>id&gt;99</font></b></i><br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=74 id=v7q0 style=MARGIN-LEFT:40px width=463>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">crn = (crnCreated.or(crnDescr)).and(crnId);</font><br style="FONT-FAMILY:Courier New">
      <i style=COLOR:#999999><font face="courier new">// ... or simple by a native priority:</font></i><br style="FONT-FAMILY:Courier New">
      <font face="courier new">crn =&nbsp; crnCreated.or(crnDescr).and(crnId);</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new"><b style=COLOR:#741b47>assert </b>crn.evaluate(order);</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
Further examples of solved tasks can be found at this <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/ujorm/src/main/java/org/SampleORM.java?view=markup id=xgyt title=link>link</a> .<br>
<br>
<br>
<h2>
  <a id=Native_Criterion name=Native_Criterion></a>Native Criterion
</h2>
Native Criterion is a special Criterion with a native SQL code. The Criterion can be created by the factory method<br>
<div style=MARGIN-LEFT:40px>
  Criterion.forSql(Property, SQL_condition)<br>
</div>
where<br>
<ul>
  <li>
    parameter <b>Property </b>is required by Ujorm to location a basic <b>database table </b>and the join relations in case a composed Property<br>
  </li>
  <li>
    <b>SQL_condition</b> is a part of the native SQL statement with a condition expression
  </li>
</ul>
<br>
The instance of the native Criterion have got some special features:<br>
<br>
<ul>
  <li>
    parameters of the SQL_condition are not supported by the Ujorm
  </li>
  <li>
    your own implementation of SQL the parameters can increase a risk of the <a href=http://en.wikipedia.org/wiki/SQL_injection id=ga:j title="SQL injection">SQL injection</a> attacks
  </li>
  <li>
    method <a href=http://ujoframework.org/javadoc/org/ujoframework/criterion/Criterion.html#evaluate%28UJO%29 id=p.o: title=Criterion.valuate(ujo)>Criterion.evaluate(ujo)</a> is not supported and throws the exception UnsupportedOperationException in the run-time<br>
  </li>
  <li>
    native Criterion dependents on a selected database so application developers should to create support for each supported database of target application to ensure database compatibility
  </li>
</ul>
<br>
The native Criterion can be joined with another Criterions include the native type. The Criterion can be used also in the <a href=#Native_Ujorm_query_3626118237620981 id=xhv6 target=_self title="Native Query">Native Query</a>.<br>
<br>
Sample of the use:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=168 id=cf4u style=MARGIN-LEFT:40px width=539>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new">&nbsp;Criterion&lt;Order&gt; crn1 = Criterion.forSql<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Order.<b><font color=#a64d79>id</font></b>, "<b style=COLOR:#674ea7>ord_order_alias.id&gt;0</b>");</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;Criterion&lt;Order&gt; crn2 = Criterion.where<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (Order.created, Operator.LE, new Date());</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;Query&lt;Order&gt; orders = session.createQuery(crn1.and(crn2));</font><br style="FONT-FAMILY:Courier New">
      <br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;for (Order order : orders) {</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp;&nbsp; System.out.println("ORDER: " + order);</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;}</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
Note: the property <b style=COLOR:#741b47>id</b> from the sample can be replaced for another UjoProperty from the Order class.<br>
<br>
<h2>
  <a id=Native_Ujorm_query_3626118237620981 name=Native_Ujorm_query_3626118237620981></a>Native Query
</h2>
The native Query <span class=hps title="Kliknutím zobrazíte alternativní překlady">is a tool</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">of the framework Ujorm</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">to </span><span class=hps title="Kliknutím zobrazíte alternativní překlady">mapping</span> a <span class=hps title="Kliknutím zobrazíte alternativní překlady">native (</span><span class="atn hps" title="Kliknutím zobrazíte alternativní překlady">database-</span>dependent) <span class=hps title="Kliknutím zobrazíte alternativní překlady">SQL</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">query</span> to <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/OrmUjo.html title="interface in org.ujoframework.orm">OrmUjo</a> business object. Each native Query must be mapped to new object. Using of the Query is similar like the object-table mapping, however the <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/annot/View.html id=k_tn title=@View>@View</a> annotation is used instead of @<b>Table</b>.<br>
<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 height=280 id=ign_ style=MARGIN-LEFT:40px width=480>
  <tbody>
  <tr>
    <td width=100%>
      <b style=COLOR:#741b47>@View</b>(select="<font color=#bf9000>SELECT ord_order_alias.id, count(*) AS item_count</font>"<br>
      &nbsp;&nbsp;&nbsp; + "<font color=#bf9000> FROM db1.ord_order ord_order_alias</font>"<br>
      &nbsp;&nbsp;&nbsp; + "<font color=#bf9000>, db1.ord_item ord_item_alias</font>"<br>
      &nbsp;&nbsp;&nbsp; + " <font color=#bf9000>WHERE ord_order_alias.id = ord_item_alias.fk_order</font>"<br>
      &nbsp;&nbsp;&nbsp; + " <font color=#bf9000>GROUP BY ord_order_alias.id</font>"<br>
      &nbsp;&nbsp;&nbsp; + " <font color=#bf9000>ORDER BY ord_order_alias.id</font>")<br>
      public <b style=COLOR:#674ea7>class </b>ViewOrder <b style=COLOR:#674ea7>extends </b>OrmTable&lt;ViewOrder&gt; {<br>
      <br>
      &nbsp;&nbsp;&nbsp; <font color=#999999>/** Unique key */</font><br>
      &nbsp;&nbsp;&nbsp; <b><font color=#741b47>@Column</font></b>(pk=true)<br>
      &nbsp;&nbsp;&nbsp; <b style=COLOR:#674ea7>public static final</b> UjoProperty&lt;ViewOrder,Long&gt; ID<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = newProperty(Long.<b style=COLOR:#674ea7>class</b>);<br>
      &nbsp;&nbsp;&nbsp; <font color=#999999>/** ItemCount */</font><br>
      &nbsp;&nbsp;&nbsp; <b style=COLOR:#674ea7>public static final</b> UjoProperty&lt;ViewOrder,Integer&gt; ITEM_COUNT<br>
      &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; = newProperty(<b style=COLOR:#741b47>0</b>);<br>
      <br>
      }<br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
The View:<br>
<ul>
  <li>
    must contain an unique column similar as a primary key<br>
  </li>
  <li>
    supports <b>relations </b>to another views or tables
  </li>
  <li>
    the view business object can't be used to the INSERT, UPDATE nor DELETE
  </li>
  <li>
    different SQL syntax can be covered in a different XML configurations<br>
  </li>
  <li>
    in the most cases the additional Criterion (all types) is supported
  </li>
  <li>
    in the most cases the additional sorting is supported
  </li>
  <li>
    attributes LIMIT and OFFSET are ignored<br>
  </li>
</ul>
<br>
<br>
<a id=States_of_persistent_object_83 name=States_of_persistent_object_83></a>
<h2>
  <a id=States_of_persistent_object_83_9213545305730154 name=States_of_persistent_object_83_9213545305730154></a>States of persistent object
</h2>
Persistent class is obtained by extending the abstract class <a href=http://ujoframework.org/javadoc/org/ujoframework/implementation/orm/OrmTable.html id=f0kd title=OrmTable>OrmTable</a> or implementation of <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/OrmUjo.html id=k8ng title=OrmUjo>OrmUjo</a> interface. Persistent object <b>doesn't</b> contain invasive states known from specifications of 'JPA/Hibernate', but each persistent object of OrmUjo type contains two other attributes:<br>
<br>
<ul>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/Session.html id=nsu. title=Session>Session</a> - is needed to obtain a 'DB connection' in late values approach, the process is called 'lazy-loading'. If an <b>attribute of</b> the persistent object is another persistent object, then in each session reading is 'session' propagated from the reference to the relational object. For this reason, if you restore the 'session', there is sufficient to setup only the first object of the relational hierarchy to the current Session.<br>
  </li>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/UjoProperty.html id=fzbr title=UjoProperty>UjoProperty</a><font color=#000000>[] - contains a list of 'Properties' </font><b style=COLOR:#000000>registered</b><font color=#000000> during the assigned session. This list provides more efficient updating of the database by 'UPDATE' command, because the command is compiled only for the modified value of the 'Properties'. Other values are ignored while updating. Note that if a session isn't assigned to the object, there is registered no value changes</font><font color=#000000>. </font><br style=COLOR:#00ff00>
  </li>
</ul>
<br>
Function of OrmUjo object is just "data transporter", without any restrictions you can do activities such as:<br>
<ul>
  <li>
    object obtained using the 'update' can be used (after changing ID) for insert
  </li>
  <li>
    a new session can be assigned to object anytime (no other dependency)
  </li>
  <li>
    object can be assigned with <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/ForeignKey.html id=wgku title="Foreign key">foreign key</a> to force LazyLoading - using 'Ujo.writeValue()'
  </li>
  <li style=BACKGROUND-COLOR:#ffffff>
    <font color=#000000>to change the session of ManyToOne type (update of foreign key) is sufficient to assign a new instance of an object containing an real Primary Key</font>
  </li>
  <li>
    <font color=#000000>when using</font> Criterion, the value of the filter (parameter) can be a new instance of OrmUjo object that contains the required Primary Key
  </li>
</ul>
<br>
Note: both of these attributes aren't transferred by Java <b>serialization,</b> which means that after the restoration from serialization, they will be logically empty.<br>
<br>
<br>
<h2>
  <a id=Mapping_of_data_types_84852531 name=Mapping_of_data_types_84852531></a>Mapping of data types
</h2>
Mapping of data types means adding JDBC type and element name to persistent Ujo property. Depending on the parameter mapping can be divided into two major groups:<br>
<ul>
  <li>
    mapping of session - mapping to another persistent object of <b>OrmUjo </b>type<br>
  </li>
  <li>
    mapping of value - other assignments of selected object types
  </li>
</ul>
More detailed description is here:<br>
<br>
<font color=#351c75><b>Mapping of values</b></font><br>
<ul>
  <li>
    <b>default</b> mapping is implemented for objects of these types: String, Boolean, Byte, Character, Short, Integer, Long, Float, Double, BigDecimal, BigInteger, byte [], java.util.Date, java.sql.Date, java.sql.Time, java.sql.Timestamp, java.sql.Blob, java.sql.Clob, Enum<br>
  </li>
  <li>
    <b>explicit</b> mapping is given in '@Column' annotation or via an XML configuration file<br>
  </li>
  <li>
    via <b>interface:</b> any object that implements the interface 'ValueExportable' is automatically mapped to 'VARCHAR'. That interface can also implement the 'Enum' type.<br>
  </li>
  <li>
    specific requirements for mapping can be implemented by overlay <b>TypeService </b>class<b><br>
    </b>
  </li>
</ul>
<br>
<div>
  <b><font color=#351c75>Mapping of session M:1</font><br>
  </b>
  <ul>
    <li>
      mapping on primary key: for mapping is used standard property, only in class name appears another persistent class of object (implementing OrmUjo). As a relational column will be automatically used the primary key of a relational table.<br>
    </li>
    <li>
      explicit mapping: used if the referenced column is not the primary key. In this case, you can use a 'RelationToOne' class that lets you put relational column with a second parameter in the following format:
    </li>
  </ul>
  <div style=MARGIN-LEFT:80px>
    ordProperty = RelationToOne.newInstance (Order.class, <b>Order.sid)</b><br>
  </div>
  <div style=MARGIN-LEFT:40px>
    I recommend referenced column mark with a unique <b>index</b> for fast searching and data integrity, some databases require an index explicitly.<br>
    <br>
  </div>
  <b style=COLOR:#351c75>Mapping of session 1:M</b><br>
</div>
<div style=MARGIN-LEFT:40px>
  This type of mapping offers (in way of writing code), easy access to the database query results. Any other value invoking generates a new database query. This type of property doesn't affect the creation or modification of database structure. Example of use:<br>
</div>
<div style=MARGIN-LEFT:40px>
  <div style=MARGIN-LEFT:40px>
    items = newRelation (Item.class)<br>
    <br>
  </div>
</div>
<b style=COLOR:#351c75>Mapping of session 1:1</b><br>
<div style=MARGIN-LEFT:40px>
  <font color=#000000>From the perspective of a solution</font> this is a special case of session M: 1, where degree number M can be limited by appropriate unique index. An alternative solution can be using a relational table as primary key (see example below).<br>
  <br>
</div>
<b style=COLOR:#351c75>Mapping of relation M:N</b><br>
<div style=MARGIN-LEFT:40px>
  <font color=#000000>The binding is implemented using two relations M:1 &amp; 1:N, which are mapped on the other (relation) table</font><font color=#000000>. </font><br>
</div>
<br>
<br>
<h2>
  <a id=Lazy_loading_7739415085933957__12776824148876254 name=Lazy_loading_7739415085933957__12776824148876254></a> Lazy loading
</h2>
Late loading of objects is a process that generally allows more efficient transfer of data between the database and the client. Late loading is implemented for each attribute that contains other entity, which is, in the database model, mapped by a foreign key.<br>
<br>
In late loading of an object Ujorm starts new database query that uses a database connection stored in <b>opened session.</b> However, because the entity <b>can't </b>open the closed session is itself, so LazyLoading on closed session <font color=#000000>shows</font> a run-time exception:<br>
<div style=MARGIN-LEFT:40px>
  new IllegalStateException ("The session is closed")<br>
</div>
<br>
<div>
  Such exemption can be avoided by choosing a suitable solution:<br>
</div>
<ul>
  <li>
    before invoking lazy to assign a open session to object:
  </li>
</ul>
<div style=MARGIN-LEFT:80px>
  OrmUjo.writeSession(session)<br>
</div>
<ul>
  <li>
    before invoking lazy to update the attributes of an object from database:<br>
  </li>
</ul>
<div style=MARGIN-LEFT:80px>
  Session.reload (ujo)<br>
</div>
<ul>
  <li>
    load the required lazy property right after obtaining the object using method according to the model:
  </li>
</ul>
<div style=MARGIN-LEFT:80px>
  item.getOrder();<br>
</div>
<ul>
  <li>
    retrieve all the lazy property to the desired depth by method:
  </li>
</ul>
<div style=MARGIN-LEFT:80px>
  OrmTools.loadLazyValuesAsBatch(...)<br>
</div>
<ul>
  <li>
    sometimes it is not necessary to load the entire entity, just a <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/ForeignKey.html id=atiw title="Foreign Key">foreign key</a>, for which there is no need to have an opened session. This key can be obtained by command:<br>
  </li>
</ul>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; OrmTable.readFK (property)<br>
<br>
Note: Ujorm core doesn't use this method and isn't included in OrmUjo interface. The method is available in the default implementation of OrmTable.<br>
<br>
<div>
  Sometimes you need to get lazy attribute(s) with a single SQL query using JOIN for more database query optimization, or to use some specific operators in your database. In this case, you can use:<br>
  <ul>
    <li>
      user's query called "Ujorm native query" mapped to a new entity, or<br>
    </li>
    <li>
      database VIEW - mapped to the new entity<br>
    </li>
  </ul>
  <br>
  <h2>
    <a id=Session_cache_2924390070129026_3856413959334468 name=Session_cache_2924390070129026_3856413959334468></a> Session cache
  </h2>
  Ujorm uses caching objects in session in order to limit duplicate database queries. Cache behavior has a simple rule:<br>
  <ul>
    <li>
      lifetime of cache has range (SCOPE) of database transactions. After executing a commit / rollback the cache will be released
    </li>
    <li>
      in cache would get only objects of foreign key when loading lazy (lazy loading), in other cases the object is always loaded from the database
    </li>
    <li>
      while updating the object, cache doesn't sync and so for elimination of potential conflicts you can empty the cache by <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/Session.html#cacheClear%28%29 id=id5r title="clearCache ()">clearCache()</a><br>
    </li>
    <li>
      cache storage is protected against memory overload, it means that the garbage collector can release part of the cache at any time
    </li>
  </ul>
  <br style=COLOR:#000000>
  <font color=#000000><font color=#000000>From cache side</font>: Ujorm doesn't have exclusive access to the database, the registration will only need to align the allocation of p</font>rimary keys. With parameter <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/metaModel/MetaParams.html#CACHE_POLICY id=xo:2 title=CACHE_POLICY>CACHE_POLICY</a> you can disable the cache for whole meta-model or you can disable releasing the cache with the garbage collector.<br>
  <br>
  To optimize performance rather recommend to keep the cache of<b> logic units</b> at the level of application logic (e.g., Articles) than maintaining a cache of database rows.<br>
  <br>
  <h2>
    <a id=DDL_support_9552100910462308_3_1376557173157592 name=DDL_support_9552100910462308_3_1376557173157592></a>DDL support
  </h2>
  Ujorm can update the database schema using DDL commands according its meta-model. Meta-model contains a description of the real database structure, which is built from class names, UjoProperty names, their annotations and occasionally from a XML configuration file. <span class=hps title="Kliknutím zobrazíte alternativní překlady">Once the meta-model loading (into a memory) is finished</span>, <span class=hps title="Kliknutím zobrazíte alternativní překlady">the </span>information is locked so any future modifications aren't possible. Updating the database is following these rules:<br>
  <br>
  <ul>
    <li>
      updates are carried out according to a meta-model right after its completion in the OrmHandler object<br>
    </li>
    <li>
      update is done only for <b>database items:</b>
    </li>
    <ul>
      <li>
        new table
      </li>
      <li>
        new columns
      </li>
      <li>
        new indexes
      </li>
      <li>
        db schema is created only on the first update<br>
      </li>
    </ul>
    <li>
      item (column, index) created in the database framework is no longer changed, so you will have to be handle migrations on <b>your own</b>, for example:<br>
    </li>
    <ul>
      <li>
        change the column NULL to NOT NULL (or back)<br>
      </li>
      <li>
        change in the index UNIQUE to NON-UNIQUE (or back)
      </li>
      <li>
        change the primary key of table, etc.<br>
      </li>
    </ul>
    <li>
      database table must contain at least the primary key
    </li>
    <li>
      Ujorm ignores non-mapped database objects (tables, columns, indexes)
    </li>
  </ul>
  <br>
  Parameter <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/metaModel/MetaParams.html#ORM2DLL_POLICY id=hj1l title=ORM2DLL_POLICY>ORM2DLL_POLICY</a> can change behavior of update to one of the following <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/ao/Orm2ddlPolicy.html id=xifg title=approaches>approaches</a>:<br>
  <ul>
    <li>
      update ban<br>
    </li>
    <li>
      allow only the first creation of the db model
    </li>
    <li>
      allow incremental changes (default)
    </li>
  </ul>
</div>
<div>
  General use of Ujorm parameters is described in the <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/ujorm/src/main/java/org/SampleORM.java?view=markup id=mqa3 title="This document">tutorial</a>.<br>
</div>
<br>
<h2>
  <a id=Entity_inheritance_45555076325 name=Entity_inheritance_45555076325></a> Entity inheritance
</h2>
Ujorm doesn't support the concept of inheritance in the JPA. The main reason is that implementation of inheritance into the existing Ujorm architecture simply doesn't fit.<br>
<br>
Easy availability of inheritance in ORM tempting to light-headed use, which can cause performance problems on production data, so I recommend rather avoid the inheritance. However, if required, Ujorm allows <b>to emulate</b> inheritance - using design pattern of <b>aggregation and interface</b> (interface).<br>
<br>
&nbsp; In draft of solution the inheritance are used entities:<br>
<ul>
  <li>
    User [id, login, password, name]
  </li>
  <li>
    Customer [user, company, discount]
  </li>
</ul>
<br>
The proposed solution is based on IUser interface, that implements User and Customer objects. Both entities, User and Customer, shares the same ID. We can start using the advantages of inheritance, because instance of type <b>ICustomer</b> can be written to the data type <b>IUser.</b> Descriptions of <b>setters</b> have been skipped to simplify the diagram.<br>
<div id=vtt7 style=MARGIN-LEFT:40px;TEXT-ALIGN:left>
  <div id=rnr0 style=TEXT-ALIGN:left>
    <br>
  </div>
</div>
<div id=n3r9 style=TEXT-ALIGN:center>
  <div id=jva8>
    <img height=238 src="images/ddcs2pg5_165qzhptzct_b.png" width=335>
  </div>
</div>
<br>
Notice that the 'Customer' has a <b>primary key</b> of <b>User </b>type and shares the same ID value:<br>
<div style=MARGIN-LEFT:40px>
  <br style="FONT-FAMILY:Courier New">
</div>
<div style=MARGIN-LEFT:40px>
  <table border=1 cellpadding=3 cellspacing=0 id=e-sn>
    <tbody>
    <tr>
      <td width=100%>
        <font face="courier new">public class Customer extends OrmTable&lt;Employee&gt; implements IUser {</font><br style="FONT-FAMILY:Courier New">
        <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:40px">
          @Column(<b>pk=true</b>, value=<font color=#0b5394>"id"</font>)<br>
          public static final UjoProperty&lt;Customer, User&gt; <b>user </b><br>
        </div>
        <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:120px">
          <div style=MARGIN-LEFT:40px>
            = newProperty(User.<b><font color=#741b47>class</font></b>);<br>
          </div>
        </div>
        <div style="FONT-FAMILY:Courier New;MARGIN-LEFT:40px">
          ...<br>
        </div>
        <font face="courier new">}</font><br>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<br>
Implementation of the method <b>Customer.getLogin ()</b> might look like this:<br>
<br>
<div style=MARGIN-LEFT:40px>
  <table border=1 cellpadding=3 cellspacing=0 height=72 id=s28y width=327>
    <tbody>
    <tr>
      <td width=100%>
        <div style="FONT-FAMILY:Courier New">
          <font size=2>@Override<br style="FONT-FAMILY:Courier New">
          <font face="courier new"> public String getLogin() {</font><br style="FONT-FAMILY:Courier New">
          </font>
        </div>
        <div style="FONT-FAMILY:Courier New">
          <div style=MARGIN-LEFT:40px>
            <font size=2> return get(user).getLogin();<br>
            </font>
          </div>
        </div>
        <font size=2><font face="courier new"> }</font></font><br>
      </td>
    </tr>
    </tbody>
  </table>
</div>
<div style=MARGIN-LEFT:40px>
  <br>
</div>
<div style="FONT-FAMILY:Courier New;MARGIN-LEFT:80px">
  <br>
</div>
In operations such as INSERT and UPDATE, we have to take care of each entity separately. See the example of coding to save the 'Customer':<br>
<div style=MARGIN-LEFT:40px>
  <br>
</div>
<div style="FONT-FAMILY:Courier New">
  <table border=1 cellpadding=3 cellspacing=0 id=tioa style=MARGIN-LEFT:40px>
    <tbody>
    <tr>
      <td width=100%>
        &nbsp;Session session = handler.getSession();<br>
        &nbsp;session.save(customer.getUser());<br>
        &nbsp;session.save(customer);<br>
        &nbsp;session.commit();<br>
      </td>
    </tr>
    </tbody>
  </table>
  <br>
</div>
<br>
Example of a full implementing the inheritance of the 'Customer' class can be found <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/inheritance/src/main/java/org/bo/Customer.java?view=markup id=jrji title=here>here</a> and its use <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/inheritance/src/main/java/org/SampleOfInheritance.java?view=markup id=gj3w title=here>here</a>.<br>
<br>
<h2>
  <a id=Primary_key_auto_increment_933 name=Primary_key_auto_increment_933></a> Primary key auto increment
</h2>
Ujorm supports automatic generation of primary key using <b>UjoSequencer </b>class. The solution was influenced primarily by requirements for high <b>reliability</b> and smooth <b>portability </b>of implementation between database of different providers. Allocation of primary keys is following these rules:<br>
<br>
<ul>
  <li>
    Primary key (PK) will be assigned automatically only if the value of 'UjoProperty' is NULL. It is possible to assign own values of PK without changing any configuration.<br>
  </li>
  <li>
    Each table has its own set of primary keys, about which take care its own instance of the&nbsp; UjoSequencer class. Class UjoSequencer contains primary key values in an auxiliary database table <b>ujorm_pk_support,</b> here is a description of columns:<br>
  </li>
  <ul>
    <li>
      <b>id</b> (db type VARCHAR) - table name including schema format<br>
    </li>
    <li>
      <b>seq</b> - the value last assigned sequence
    </li>
    <li>
      <b>cache</b> - UjoSequencer can allocate a number of consecutive numbers, which then allocates from memory to increase performance. Enabled cache may cause:<br>
    </li>
    <ul>
      <li>
        discontinuous series of keys in case of restart Ujorm<br>
      </li>
      <li>
        violation of time sequence in the case of multiple Ujorm clients<br>
      </li>
    </ul>
  </ul>
</ul>
<div style=MARGIN-LEFT:80px>
  This behavior can be eliminated by disabling the cache using value 1. Value of cache can be modified correctly also in application program (SQL command).<br>
</div>
<ul>
  <ul>
    <li>
      <b>maxvalue</b> - if a column 'seq' exceeds the maximum value, Ujorm shows an exception<br>
    </li>
  </ul>
  <li>
    allocating the primary key of Ujorm is used independent DB connection, so that any rollback of transaction wouldn't cause the return already assigned primary keys
  </li>
</ul>
<br>
<span class=hps title="Kliknutím zobrazíte alternativní překlady">How does the</span> default class <b>UjoSequence</b>? <span class=hps title="Kliknutím zobrazíte alternativní překlady">Sequence</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">numbers</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">are taken </span><span class=hps title="Kliknutím zobrazíte alternativní překlady">from</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">the database table column </span><b><span class=hps title="Kliknutím zobrazíte alternativní překlady">ujorm_pk_support.seq</span></b>. <span class=hps title="Kliknutím zobrazíte alternativní překlady">Ujorm</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">have</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">also</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">booked</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">a series</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">of numbers</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">in advance</span>, <span class=hps title="Kliknutím zobrazíte alternativní překlady">not to have</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">ID</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">for</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">each</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">reaching</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">back</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">to the DB</span>, <span class=hps title="Kliknutím zobrazíte alternativní překlady">the buffer size</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">is</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">governed by</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">the cache</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">column</span>. <span class=hps title="Kliknutím zobrazíte alternativní překlady">The</span> <b>seq</b> <span class=hps title="Kliknutím zobrazíte alternativní překlady">column</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">is</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">always</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">the last</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">number</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">of the</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">allocated</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">range</span>. <span class=hps title="Kliknutím zobrazíte alternativní překlady">Column</span> <b><span class=hps title="Kliknutím zobrazíte alternativní překlady">maxvalue</span></b> <span class=hps title="Kliknutím zobrazíte alternativní překlady">can</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">limit</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">the maximum</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">number of</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">assigned</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">sequence</span>, in case <span class=hps title="Kliknutím zobrazíte alternativní překlady">the next number</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">overcome</span>s <span class=hps title="Kliknutím zobrazíte alternativní překlady">the</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">limit</span> so the class <span class=hps title="Kliknutím zobrazíte alternativní překlady">UjoSequencer</span>&nbsp;<span class=hps title="Kliknutím zobrazíte alternativní překlady">throws</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">exception</span>. <span class=hps title="Kliknutím zobrazíte alternativní překlady">If</span> <b><span class=hps title="Kliknutím zobrazíte alternativní překlady">maxvalue</span> </b><span class=hps title="Kliknutím zobrazíte alternativní překlady">have got zero, so</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">the</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">limit</span> is not checked.<br>
<br>
A common question is how to use native support of database sequence? The solution lies in creating own implementation (child) of <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/UjoSequencer.html id=j8-n title=UjoSequencer>UjoSequencer</a> class. Class of this child must be registered in the parameters Ujorm before creating a meta-model. The only requirement of solution is that the acquisition of a new primary key (e.g. using JDBC) must be completed before INSERT command. Removing this condition is in the development plan of Ujorm.<br>
<br>
There is possible to suppress the formation table 'ujorm_pk_support' by the overriding the method UjoSequencer.isSequenceTableRequired() in case a different implementation of the ID generator is used.<br>
<br>
<h2>
  <a id=Database_procedures_2677129503 name=Database_procedures_2677129503></a>Database procedures
</h2>
Ujorm supports since version 0.94 invoking database stored <b>procedures</b> and <b>functions</b> (the procedure). Each procedure is described by class extending an abstract DbProcedure class, which implements the Ujo. Important is an order of UjoProperties in the class, which must match the order of parameters in the procedure. If the procedure <b>have no return type,</b> the first constant UjoProperty in order will be <b>Void.class </b>type<b>.</b> The first UjoProperty is OUTPUT type, others are INPUT type. The default type of properties you can override by annotation <i>@Parameter (input = true, output = true).</i> Database procedures need to be <b>registered</b> in the class of databases like the database table:<br>
<br>
<div style=MARGIN-LEFT:40px>
  public static final Property &lt;Database,MyProcedure&gt; procedure<br>
</div>
<div style=MARGIN-LEFT:40px>
  <div style=MARGIN-LEFT:40px>
    = NewInstance (MyProcedure.class);<br>
  </div>
</div>
<br>
We create an instance of the procedure, fill the INPUT type parameters and invoke with 'call' method with <font color=#000000>parameter of opened session</font>:<br>
<br>
<div style=MARGIN-LEFT:40px>
  MyProcedure procedure = new MyProcedure().<br style="FONT-FAMILY:Courier New">
  procedure.set (MyProcedure.DATE, new Date ());<br style="FONT-FAMILY:Courier New">
  String result = procedure.call (session);<br>
  <br>
</div>
Complete example you can find in <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/ujorm/src/main/java/org/SampleORM.java?view=markup id=izey title=tutorial>tutorial</a>. Instances of the procedure isn't connected with a particular session and such instance can be used can frequently with different parameters (only one-thread access). Ujorm version 1.00 does not support the return type of parameter ResultSet.<br>
<br>
<h2>
  <a id=Transaction_control_0930804139_6528190389441351 name=Transaction_control_0930804139_6528190389441351></a> Transaction control
</h2>
<p>
  All database DML statements can be seen as temporary until they are committed. Ujorm supports commitment with the Ujorm Session.commit() . Method Session.rollback() is used to remove operations performed since the previous commit or rollback. Use this method when an exception occurs or when the program detects some error condition or error in the data.<br>
  <br>
  For a parallel transaction use a next session.<br>
  <br>
  See a JDBC 2.0 documentation for more information.
</p>
<br>
<p>
</p>
<p>
  <br>
</p>
<h2>
  <a id=API_extention_3988491735460056_473356603837205 name=API_extention_3988491735460056_473356603837205></a> API extension
</h2>
In development, after time we can meet the requirement of implementation of specific function or features of SQL language. For this type of requirement can be created "own child" of <a href=http://ujorm.com/javadoc/org/ujoframework/orm/SqlDialect.html id=m2mt title=SqlDialect><b>SqlDialect</b></a> class (or some of its implementation), because this class provides several important activities:<br>
<br>
<ul>
  <li>
    creates a specific SQL queries for different CRUD type databases
  </li>
  <li>
    defines the syntax of each type of operator in the WHERE phrase<br>
  </li>
  <li>
    creates DDL commands according to a meta-model
  </li>
  <li>
    provides DB connection (or other parameters for DB connection)<br>
  </li>
  <li>
    provides a list of SQL keywords
  </li>
</ul>
<br>
Any of the attributes above can be easily modified by creating a 'child', new class is registered by annotation in the Database class type. Overlapping the SqlDialect class can solve one of the following requirements:<br>
<ul>
  <li>
    expansion and optimization of SQL queries
  </li>
  <li>
    mapping of specific data type of SQL language<br>
  </li>
  <li>
    completion of own operators for Criterion class has two steps:
  </li>
  <ol>
    <li>
      create a child of <a href=http://ujorm.com/javadoc/org/ujoframework/criterion/ValueCriterion.html id=sekh title=ValueCriterion>ValueCriterion</a> class, extended with specification of a custom type
    </li>
    <li>
      overlay method <a href=http://ujorm.com/javadoc/org/ujoframework/orm/SqlDialect.html#getCriterionTemplate%28org.ujoframework.criterion.ValueCriterion%29 id=s7m9 title="SqlDialect.getCriterionTemplate ()">SqlDialect.getCriterionTemplate ()</a> implementing the extended operator
    </li>
  </ol>
  <li>
    creating own DB connection or a its modification (adding parameters)
  </li>
  <li>
    add or remove a reserved SQL keywords
  </li>
</ul>
<br>
<br>
<b>TypeService</b><br>
class provides a mapping of application values to the JDBC API. Methods of class can be overridden with your own implementations. Registration is done by annotation in the 'Database' type class.<br>
<br>
<b>UjoSequencer</b><br>
As stated earlier, this class allows the implementation of your own algorithm for assigning a unique ID to INSERT command. Registration is done by annotation in the 'Database' type class.<br>
<br>
<h2>
  <a id=Supported_databases_2606746893_6155699934696457 name=Supported_databases_2606746893_6155699934696457></a> Supported databases
</h2>
Ujorm framework offers prepared dialects for the following databases:<br>
<br>
<ul style=MARGIN-LEFT:1.5em>
  <li>
    PostgreSQL (8.3+)
  </li>
  <li>
    MySQL (5.0+)
  </li>
  <li>
    Derby (10.5+)
  </li>
  <li>
    Oracle (8.0+)
  </li>
  <li>
    H2 (<span class=tx>1.2.147</span>+)
  </li>
  <li>
    HSQLDB (1.8+)
  </li>
  <li>
    Firebird (jaybird 2.1.6+)
  </li>
  <li>
    MS-SQL on the SQL Server 2008 R2 (JDBC Driver 3.0)<br>
  </li>
</ul>
<br>
As mentioned in the previous chapter, support for other databases can be implemented by overwriting the <a href=http://ujorm.com/javadoc/org/ujoframework/orm/SqlDialect.html id=hgr8 title=SqlDialect><b>SqlDialect</b></a> class or one of its 'child'. The new class has to be registered in application class of the 'Database' type.<br>
<br>
<br>
<h2>
  <a id=Why_UjoProperty_constants_have_1720420499458618 name=Why_UjoProperty_constants_have_1720420499458618></a> Why UjoProperty constants have lowercase letters?
</h2>
In the examples mentioned in this document are the names of the static field of UjoProperties often written in lower case - contrary to normal convention. The reason is to shorten the code when creating UjoProperty, but also seems to be useful when small letters more correspond to&nbsp; instance variables (fields). Lowercase letters are proven to be better, but the using the capital letters in your project won't create a technical problem.<br>
<br>
Full specification of UjoProperty can be set explicitly, including a <b>name</b>, by this pattern:<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public static final Property &lt;BO, Long&gt;&nbsp; <b style="FONT-FAMILY:Courier New">id</b> = <font face="courier new">newProperty</font><b style="FONT-FAMILY:Courier New">('id',</b> Long.class);<br>
<br>
In short writing is name of 'Property' taken from name of field:<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public static final Property &lt;BO, Long&gt; <b style="FONT-FAMILY:Courier New">id</b> = newProperty (Long, class);<br>
<br>
Terms used in UJO Framework:<br>
<ul>
  <li>
    UjoProperty&nbsp;<b>field</b>&nbsp;- the name of the static constants of UjoProperty in the implementation of Ujo<br>
  </li>
  <li>
    UjoProperty&nbsp;<b>name</b>&nbsp;- a logical indication that returns 'UjoProperty.getName()' as the String type
  </li>
</ul>
<br>
<h2>
  <a id=Use_of_UJO_objects_95477417165 name=Use_of_UJO_objects_95477417165></a> Using of UJO objects
</h2>
This chapter describes the important features of the UJO object, which have an effect on the correct behavior:<br>
<br>
<ul>
  <li>
    each <b>attribute</b> <b>of entity</b> has its own unique UjoProperty instance<br>
  </li>
  <li>
    for reading and writing values are used these methods:<br>
  </li>
  <ul>
    <li>
      UjoProperty.getValue (..)<br>
    </li>
    <li>
      UjoProperty.setValue (..)
    </li>
  </ul>
</ul>
<div style=MARGIN-LEFT:40px>
  or other methods that invoke them internally, for example:<br>
</div>
<ul>
  <ul>
    <li>
      UjoMiddle.get (..)
    </li>
    <li>
      UjoMiddle.set (..)
    </li>
  </ul>
</ul>
<div style=MARGIN-LEFT:40px>
  or more comfortable <b>getters</b> and <b>setters,</b> that invoke (internally) one of the methods above<br>
</div>
<ul>
  <li>
    method 'UjoProperty.getValue()' <b>changes</b> values NULL to the default value UjoProperty (which is NULL if it isn't set otherwise). Beware, the method 'Ujo.readValue()' doesn't do any replacement of default values.
  </li>
  <li>
    for reading and writing values <b>is not recommended</b> to invoke <b>untyped</b> methods<br>
  </li>
  <ul>
    <li>
      Ujo.readValue ()<br>
    </li>
    <li>
      Ujo.writeValue ()<br>
    </li>
  </ul>
</ul>
<div style=MARGIN-LEFT:40px>
  However, these two methods are suitable for the <b>overriding </b>in propose to implement the various conversions, validations and other requirements.<br>
</div>
<ul>
  <li>
    for default value of 'UjoProperty' is suitable only <b>steady object</b> (immutable object)
  </li>
  <li>
    Ujo objects <font color=#000000>can be generally inherited</font>, inheritance of OrmUjo objects isn't supported directly<br>
  </li>
  <li>
    more information about Ujo Core can be found <a href=http://ujoframework.org/javadoc/org/ujoframework/package-summary.html#UJO id=d6tt title=here>here</a> .<br>
  </li>
</ul>
<br>
<h2>
  <a id=Best_Practices_787200236848682 name=Best_Practices_787200236848682></a> Best Practices
</h2>
<ul>
  <li>
    common ancestor of your domain objects can simplify behavior changes of all children. An example might be a generic implementation of method 'toString ()', or implementation of methods 'equals (..)', 'hashCode ()', etc.<br>
  </li>
  <li>
    service for processing data from DB to Query can easily complement other Criterion. An example of use might be implementation of limited access to data based on context (role) of logged user
  </li>
  <li>
    for access to the values of UJO objects proved using the methods:
  </li>
  <ul>
    <li>
      UjoMiddle.get (property)
    </li>
    <li>
      UjoMiddle.set (property, value)
    </li>
  </ul>
</ul>
<br>
<h2>
  <a id=Meta_Model_4256673146749511_32_6450549354135522 name=Meta_Model_4256673146749511_32_6450549354135522></a> Meta-Model
</h2>
Meta-model is created according to the content of Ujo properties of Database class and its tables. The names of tables, view and procedure are derived from names of Ujo property. Most features of the model can be overridden by annotations placed directly in property or in name of the class. Features set by annotation can be also overridden by configuration XML file, which can optionally modify only selection of a meta-model.<br>
<br>
After creating a meta-model in memory, the model is locked and you can't write into meta-model anymore, at run-time, however, you can obtain useful information from it. Slightly simplified class diagram meta is in the following picture:<br>
<br>
<div id=wa5- style=TEXT-ALIGN:center>
  <div id=m.te style=TEXT-ALIGN:center>
    <div id=ij75 style=TEXT-ALIGN:center>
      <img height=452 src="images/ddcs2pg5_178cxdznkct_b.png" width=431>
    </div>
    <br>
  </div>
</div>
<br>
<p>
  <b>Entity Description:</b>
</p>
<ul>
  <li>
    OrmHandler is a class providing meta-model, in the application is recommended to keep only one instance of this class. Class offers several methods to provide selected parts of meta-model. OrmHandler is the only entity in the diagram, which isn't a child of an abstract AbstractMetaModel class (implementing the interface of Ujo).<br>
  </li>
  <li>
    MetaRoot creates the base of meta-model and allows you to read an XML configuration file
  </li>
  <li>
    MetaParams contains general Ujorm parameters that can be also modify by the XML configuration file<br>
  </li>
  <li>
    MetaDatabase contains a database connection, a list of tables (or views) and the list of database procedures. It also includes a default schema.<br>
  </li>
  <li>
    MetaTable represents the database table that takes the schema from 'MetaDatabase', but you can configure (with annotations) also a different scheme. Logical attribute 'view' differs view from the tables (you can't white into 'view' and it doesn't affect the updating of the DB).<br>
  </li>
  <li>
    MetaPKey - each table contains one primary key
  </li>
  <li>
    MetaRelation2Many - represents a 1: M type database session<br>
  </li>
  <li>
    MetaColumn - class represents the database column, or stored procedure parameters.<br>
  </li>
</ul>
<br>
<br>
<h2>
  <a id=Integrating_Spring_Framework_1 name=Integrating_Spring_Framework_1></a>Integrating Spring Framework
</h2>
<p style=MARGIN-LEFT:0px;MARGIN-RIGHT:0px>
  The Spring Framework can automate the creation and release Ujorm session and manage a transaction management using a special module called 'orm-spring'. In a Maven project use the next dependency in your POM file:<i><br>
  <br>
  </i>
</p>
<table border=1 cellpadding=3 cellspacing=0 id=j3vz style=MARGIN-LEFT:auto;MARGIN-RIGHT:auto;TEXT-ALIGN:left>
  <tbody>
  <tr>
    <td width=100%>
      <i>&nbsp;&nbsp; &lt;dependency&gt;<br clear=none>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;groupId&gt;<b>org.ujoframework</b>&lt;/groupId&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br clear=none>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;artifactId&gt;<b>ujo-spring</b>&lt;/artifactId&gt;<br clear=none>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;version&gt;<b>1.10</b>&lt;/version&gt;<br clear=none>
      &nbsp;&nbsp; &lt;/dependency&gt;<br>
      </i>
    </td>
  </tr>
  </tbody>
</table>
<br>
<p>
</p>
<p id=qv1m>
  <br>
</p>
<p id=xy2r>
  <a id=Z_sk_n_session_210368364331412 name=Z_sk_n_session_210368364331412></a> How to get a Ujorm Session? The procedure for obtaining the session will vary according to the code that calls the session:<br>
</p>
<ul>
  <li>
    aroundSessionAOP - calls from a job or other internal
  </li>
  <li>
    Open Session in View - using HTTP Request
  </li>
</ul>
<br>
<p>
  AroundSessionAOP is currently defined in the current spring-beans.xml pointcut <i><b><br>
  </b></i>
</p>
<p style=MARGIN-LEFT:40px>
  <i><font face="courier new">org.application.administration.jobs ..*(..)</font><br>
  </i>
</p>
<p>
  <i><br>
  </i>
</p>
<p>
  Open Session in View is defined in the <b>web.xml</b> .
</p>
<p>
  <i><br>
  </i>
</p>
<p>
  <a id=Ru_n_zen_session_pomoc_session name=Ru_n_zen_session_pomoc_session></a> How to use the session manually?
</p>
<table border=1 bordercolor=#999999 cellpadding=3 cellspacing=0 id=zzvi>
  <tbody>
  <tr>
    <td width=100%>
      <font face="courier new"><font color=#666666>&nbsp;&nbsp; UjoSessionFactoryFilter ujoSessionFactoryFilter<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = (UjoSessionFactoryFilter)wac.getBean("ujoSessionFactory");<br>
      &nbsp;&nbsp; ujoSessionFactoryFilter.openSession(); </font></font><br style="COLOR:#666666;FONT-FAMILY:Courier New">
      <font face="courier new"><font color=#666666>&nbsp;&nbsp; ...<br>
      &nbsp;&nbsp; ujoSessionFactoryFilter.closeSession();</font></font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<p>
  How to use a Manual control session and transaction - using ORM handle?
</p>
<table border=1 bordercolor=#999999 cellpadding=3 cellspacing=0 id=wgnx>
  <tbody>
  <tr>
    <td width=100%>
      &nbsp;<font face="courier new">&nbsp; OrmHandler handler = (OrmHandler) wac.getBean("ormHandler"); </font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp; Session s = handler.createSession() ;</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp; ...</font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp; s.commit(); </font><br style="FONT-FAMILY:Courier New">
      <font face="courier new">&nbsp;&nbsp; s.close();</font><br>
    </td>
  </tr>
  </tbody>
</table>
<br>
<br>
See the official <a href=http://www.springsource.org/documentation id=isjx title="Spring documentation">Spring documentation</a> for more information.<i><br>
</i><br>
<br>
<h2>
  <a id=Performance_6233224483458395_1_4940767214421822 name=Performance_6233224483458395_1_4940767214421822></a>Performance
</h2>
Ujorm is very fast in comparison to its competitors, see the benchmark table to detail information. I hope that you will not be angry if I compare Ujorm performance with the popular Hibernate ORM framework. The result of the benchmark is listed in the next table. Each action represents an database operation without any optimization.<br>
<br>
<table border=1 bordercolor=#999999 cellpadding=3 cellspacing=0 id=wm26>
  <tbody>
  <tr>
    <td width=25%>
      <b style=COLOR:#674ea7>Action</b> <b><font color=#674ea7>on</font></b><br>
      <b style=COLOR:#674ea7>PostgreSQL</b><br>
    </td>
    <td style=TEXT-ALIGN:center width=25%>
      <b style=COLOR:#674ea7>Ujorm 1.00</b><br>
      <font color=#674ea7>[sec]</font><br>
    </td>
    <td style=TEXT-ALIGN:center width=25%>
      <b><font color=#674ea7>Hibernate 3.3.1<br>
      </font></b><font color=#674ea7>[sec]</font><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      <b><font color=#674ea7>Ratio</font></b><br>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <b>meta data</b><br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      0.33<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      1.53<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      4.65<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>single select</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.35<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.58<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.67<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>multi select</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      21.78<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      168.01<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      7.71<br>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <b>empty select</b><br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      1.24<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      151.17<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      <b style=COLOR:#cc0000>121.85</b><br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>insert</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      11.12<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      12.30<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.11<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>delete</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      101.18<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      208.28<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      2.06<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>update</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      8.04<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      3.90<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.49<br>
    </td>
  </tr>
  </tbody>
</table>
&nbsp;<br>
<br>
Action description:<br>
<ul>
  <li>
    meta data - time to loading meta-model and to verify database model (auto-update option is enabled)<br>
  </li>
  <li>
    single select - the one big select for all order items (with a condition)
  </li>
  <li>
    multi select - many different selects to emulate a server application or statements with no optimization
  </li>
  <li>
    empty selects - 2000 selects with the empty result - where a condition contains different parameter values<br>
  </li>
  <li>
    insert - insert 2000 orders, 14000 items and 1 user
  </li>
  <li>
    delete - execution many statements to delete all table rows<br>
  </li>
  <li>
    update - modify and save a loaded BO
  </li>
</ul>
<br>
Environment description:<br>
<ul>
  <li>
    date of performance: 2010-10-15
  </li>
  <li>
    test through the 2000 orders and 14,000 items
  </li>
  <li>
    against the database PostgreSQL 8.3 (on the same computer)
  </li>
  <li>
    values are an average of 5 measurements
  </li>
  <li>
    DB indexes was insignificant
  </li>
  <li>
    UJO Framework release 1.00
  </li>
  <li>
    Hibernate 3.3.1.GA + EhCacheProvider
  </li>
  <li>
    Java version "1.6.0_14"
  </li>
  <li>
    default Java run-time parameters<br>
  </li>
  <li>
    Intel Dual Core, 2GB RAM
  </li>
  <li>
    Windows XP + SP3<br>
  </li>
  <li>
    benchmark code is available on the SourceForge
  </li>
</ul>
<br>
<br>
<br>
<b>The similar test </b>I have finished on the <a href=http://www.h2database.com/html/main.html id=czbp title="database H2">database H2</a> (release 1.2.147) running in-memory mode. The test was performed on 2011-01-29 on the release Ujorm 1.10:<br>
<br>
<table border=1 cellpadding=3 cellspacing=0 id=js_n>
  <tbody>
  <tr>
    <td width=25%>
      <b style=COLOR:#674ea7>Action</b> <b><font color=#674ea7>on</font></b><br>
      <b style=COLOR:#674ea7>H2 in-memory</b><br>
    </td>
    <td style=TEXT-ALIGN:center width=25%>
      <b style=COLOR:#674ea7>Ujorm 1.10</b><br>
      <font color=#674ea7>[sec]</font><br>
    </td>
    <td style=TEXT-ALIGN:center width=25%>
      <b><font color=#674ea7>Hibernate 3.3.1<br>
      </font></b><font color=#674ea7>[sec]</font><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      <b><font color=#674ea7>Ratio</font></b><br>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <b>meta data</b><br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      0.42<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      1.26<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      3.0<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>single select</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.19<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.53<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      2.9<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>multi select</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.69<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      155.28<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      <b style=COLOR:#cc0000>225.9</b><br>
    </td>
  </tr>
  <tr>
    <td valign=top>
      <b>empty select</b><br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      0.36<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      155.37<br>
    </td>
    <td style=TEXT-ALIGN:right valign=top>
      <b style=COLOR:#cc0000>432.1</b><br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>insert</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.62<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      2.43<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.5<br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>delete</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.37<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      151.43<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      <b style=COLOR:#cc0000>407.3</b><br>
    </td>
  </tr>
  <tr>
    <td width=25%>
      <b>update</b><br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.28<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      1.13<br>
    </td>
    <td style=TEXT-ALIGN:right width=25%>
      0.9<br>
    </td>
  </tr>
  </tbody>
</table>
&nbsp;<br>
<b><br>
Note: </b><br>
<span class=hps title="Kliknutím zobrazíte alternativní překlady">The <b>Hibernate</b></span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">framework provides</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">many</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">parameters</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">for</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">optimization</span>, <span class=hps title="Kliknutím zobrazíte alternativní překlady">however some of them can </span><span class=hps title="Kliknutím zobrazíte alternativní překlady">bring</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">some</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">limitations.</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">For example</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">a Hibernate</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">transaction</span> can be set to <b><span class=hps title="Kliknutím zobrazíte alternativní překlady">read</span><span class=atn title="Kliknutím zobrazíte alternativní překlady">-</span>only</b> <span class=hps title="Kliknutím zobrazíte alternativní překlady">in the</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">case of </span>the exclusive SELECT(s) to better performance. The <b><span class=hps title="Kliknutím zobrazíte alternativní překlady">Ujorm</span> </b><span class=hps title="Kliknutím zobrazíte alternativní překlady">have got </span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">a </span><span class=hps title="Kliknutím zobrazíte alternativní překlady">great</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">performance</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">on</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">default</span> <span class=hps title="Kliknutím zobrazíte alternativní překlady">settings</span> so it will save&nbsp;<span class=short_text id=uyms><span class=hps title="Kliknutím zobrazíte alternativní překlady">a lot of</span> </span> development time.<br>
<br>
<br>
<h2>
  <a id=More_information_0795528381750 name=More_information_0795528381750></a>More information
</h2>
<ul>
  <li>
    <a href=http://ujoframework.org/javadoc/org/ujoframework/orm/package-summary.html id=dqu4 title=JavaDoc>JavaDoc</a> the detail API descriptions with some examples of use<br>
  </li>
  <li>
    <a href=http://ujorm.com/ id=bbaa title="Home Page">Home Page</a>
  </li>
  <li>
    <a href=http://ujoframework.org/presentation/index.htm#orm>Presentation</a> (intro slide show), includes<br>
  </li>
  <ul>
    <li>
      short motivation
    </li>
    <li>
      Key Features<br>
    </li>
    <li>
      Compared with competitors (Hibernate iBatis)<br>
    </li>
  </ul>
  <li>
    Examples of using <a href=http://ujoframework.svn.sourceforge.net/viewvc/ujoframework/trunk/samples/ujorm/src/main/java/org/SampleORM.java?view=markup id=sqm9 title="Source Code">the source code</a><br>
  </li>
  <li>
    <a href=http://ujoframework.blogspot.com/ id=pdbl title=Blog>Blog</a>
  </li>
  <li>
    <a href=http://ujoframework.org/dokuwiki/doku.php id=n1ei title=Wiki>Wiki</a>
  </li>
  <li>
    <a href=http://ujoframework.org/dokuwiki/doku.php?id=orm_faq id=fzmq title=FAQ>Frequently asked questions - FAQ</a>
  </li>
  <li>
    <a href=http://en.wikipedia.org/wiki/Wikipedia_talk:Articles_for_creation/Ujorm id=vp62 title=Wikipedia>Wikipedia</a> (declined article: how to get reputable, third-party information sources?)<br>
  </li>
</ul>
<br>
<br>
<h2>
  <a id=References_9305696342416853_22_6503170924344536 name=References_9305696342416853_22_6503170924344536></a> References
</h2>
<ul>
  <li>
    The <a href=http://www.effectiva.cz/en/ecall>eCall</a> is a complete software solution for management of corporate telecommunications - especially for a modern call center. It enables easy organization, management and automated operation of all telecommunications. See Ujorm development <a href=http://ujoframework.blogspot.com/2010/10/ujorm-development-interview.html>Interview</a>.
  </li>
  <li>
    Do you wish to make reference to your application, built on Ujorm? Send us a link to your project to the email address support@ujorm.com
  </li>
</ul>
<br>
<br>
<h2>
  <a id=Acknowledgements_7557169868300 name=Acknowledgements_7557169868300></a> Acknowledgements
</h2>
Thanks to developer team at <a href=http://www.effectiva.cz/ id=orok title="Effectiva Solutions">Effectiva Solutions</a> for their valuable comments on the technical content of this document.<br>
<br>
<br></body>
</html>